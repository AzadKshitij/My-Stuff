"use strict";/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

var p_=Object.create;var On=Object.defineProperty,h_=Object.defineProperties,m_=Object.getOwnPropertyDescriptor,y_=Object.getOwnPropertyDescriptors,g_=Object.getOwnPropertyNames,Ld=Object.getOwnPropertySymbols,__=Object.getPrototypeOf,$d=Object.prototype.hasOwnProperty,T_=Object.prototype.propertyIsEnumerable;var Yd=(r,e,t)=>e in r?On(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$e=(r,e)=>{for(var t in e||(e={}))$d.call(e,t)&&Yd(r,t,e[t]);if(Ld)for(var t of Ld(e))T_.call(e,t)&&Yd(r,t,e[t]);return r},Ut=(r,e)=>h_(r,y_(e));var h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),b_=(r,e)=>{for(var t in e)On(r,t,{get:e[t],enumerable:!0})},jd=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of g_(e))!$d.call(r,i)&&i!==t&&On(r,i,{get:()=>e[i],enumerable:!(n=m_(e,i))||n.enumerable});return r};var ns=(r,e,t)=>(t=r!=null?p_(__(r)):{},jd(e||!r||!r.__esModule?On(t,"default",{value:r,enumerable:!0}):t,r)),v_=r=>jd(On({},"__esModule",{value:!0}),r);var se=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var _f=h((pA,cs)=>{var Zd,Xd,Qd,Jd,ef,tf,rf,nf,sf,us,za,af,of,uf,Vr,lf,cf,df,ff,pf,hf,mf,yf,gf,ls;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof cs=="object"&&typeof cs.exports=="object"?r(t(e,t(cs.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Zd=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},Xd=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},Qd=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},Jd=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},ef=function(n,i){return function(s,a){i(s,a,n)}},tf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},rf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(p){try{f(a.next(p))}catch(y){l(y)}}function d(p){try{f(a.throw(p))}catch(y){l(y)}}function f(p){p.done?u(p.value):o(p.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},nf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){return d([f,p])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(p){f=[6,p],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},sf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&ls(i,n,s)},ls=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},us=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},za=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},af=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(za(arguments[i]));return n},of=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},uf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},Vr=function(n){return this instanceof Vr?(this.v=n,this):new Vr(n)},lf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(A,x){u.push([m,g,A,x])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(A){y(u[0][3],A)}}function d(m){m.value instanceof Vr?Promise.resolve(m.value.v).then(f,p):y(u[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},cf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:Vr(n[o](l)),done:o==="return"}:u?u(l):l}:u}},df=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof us=="function"?us(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},ff=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};pf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&ls(i,n,s);return t(i,n),i},hf=function(n){return n&&n.__esModule?n:{default:n}},mf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},yf=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},gf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",Zd),r("__assign",Xd),r("__rest",Qd),r("__decorate",Jd),r("__param",ef),r("__metadata",tf),r("__awaiter",rf),r("__generator",nf),r("__exportStar",sf),r("__createBinding",ls),r("__values",us),r("__read",za),r("__spread",af),r("__spreadArrays",of),r("__spreadArray",uf),r("__await",Vr),r("__asyncGenerator",lf),r("__asyncDelegator",cf),r("__asyncValues",df),r("__makeTemplateObject",ff),r("__importStar",pf),r("__importDefault",hf),r("__classPrivateFieldGet",mf),r("__classPrivateFieldSet",yf),r("__classPrivateFieldIn",gf)})});var Q=h(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.matchAnyPattern=hr.extractTerms=hr.repeatedTimeunitPattern=void 0;function fT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}hr.repeatedTimeunitPattern=fT;function fp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}hr.extractTerms=fp;function pT(r){return`(?:${fp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}hr.matchAnyPattern=pT});var K=h((ao,oo)=>{(function(r,e){typeof ao=="object"&&typeof oo!="undefined"?oo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(ao,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},A=function(M,v,_){var P=String(M);return!P||P.length>=v?M:""+Array(v+1-P.length).join(_)+M},x={s:A,z:function(M){var v=-M.utcOffset(),_=Math.abs(v),P=Math.floor(_/60),E=_%60;return(v<=0?"+":"-")+A(P,2,"0")+":"+A(E,2,"0")},m:function M(v,_){if(v.date()<_.date())return-M(_,v);var P=12*(_.year()-v.year())+(_.month()-v.month()),E=v.clone().add(P,l),S=_-E<0,O=v.clone().add(P+(S?-1:1),l);return+(-(P+(_-E)/(S?E-O:O-E))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},C="en",z={};z[C]=g;var re=function(M){return M instanceof ye},de=function(M,v,_){var P;if(!M)return C;if(typeof M=="string")z[M]&&(P=M),v&&(z[M]=v,P=M);else{var E=M.name;z[E]=M,P=E}return!_&&P&&(C=P),P||!_&&C},J=function(M,v){if(re(M))return M.clone();var _=typeof v=="object"?v:{};return _.date=M,_.args=arguments,new ye(_)},D=x;D.l=de,D.i=re,D.w=function(M,v){return J(M,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var ye=function(){function M(_){this.$L=de(_.locale,null,!0),this.parse(_)}var v=M.prototype;return v.parse=function(_){this.$d=function(P){var E=P.date,S=P.utc;if(E===null)return new Date(NaN);if(D.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var O=E.match(y);if(O){var W=O[2]-1||0,ee=(O[7]||"0").substring(0,3);return S?new Date(Date.UTC(O[1],W,O[3]||1,O[4]||0,O[5]||0,O[6]||0,ee)):new Date(O[1],W,O[3]||1,O[4]||0,O[5]||0,O[6]||0,ee)}}return new Date(E)}(_),this.$x=_.x||{},this.init()},v.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},v.$utils=function(){return D},v.isValid=function(){return this.$d.toString()!==p},v.isSame=function(_,P){var E=J(_);return this.startOf(P)<=E&&E<=this.endOf(P)},v.isAfter=function(_,P){return J(_)<this.startOf(P)},v.isBefore=function(_,P){return this.endOf(P)<J(_)},v.$g=function(_,P,E){return D.u(_)?this[P]:this.set(E,_)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(_,P){var E=this,S=!!D.u(P)||P,O=D.p(_),W=function(ft,Ne){var Ce=D.w(E.$u?Date.UTC(E.$y,Ne,ft):new Date(E.$y,Ne,ft),E);return S?Ce:Ce.endOf(o)},ee=function(ft,Ne){return D.w(E.toDate()[ft].apply(E.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(Ne)),E)},oe=this.$W,ie=this.$M,dt=this.$D,Le="set"+(this.$u?"UTC":"");switch(O){case d:return S?W(1,0):W(31,11);case l:return S?W(1,ie):W(0,ie+1);case u:var sr=this.$locale().weekStart||0,ar=(oe<sr?oe+7:oe)-sr;return W(S?dt-ar:dt+(6-ar),ie);case o:case f:return ee(Le+"Hours",0);case a:return ee(Le+"Minutes",1);case s:return ee(Le+"Seconds",2);case i:return ee(Le+"Milliseconds",3);default:return this.clone()}},v.endOf=function(_){return this.startOf(_,!1)},v.$set=function(_,P){var E,S=D.p(_),O="set"+(this.$u?"UTC":""),W=(E={},E[o]=O+"Date",E[f]=O+"Date",E[l]=O+"Month",E[d]=O+"FullYear",E[a]=O+"Hours",E[s]=O+"Minutes",E[i]=O+"Seconds",E[n]=O+"Milliseconds",E)[S],ee=S===o?this.$D+(P-this.$W):P;if(S===l||S===d){var oe=this.clone().set(f,1);oe.$d[W](ee),oe.init(),this.$d=oe.set(f,Math.min(this.$D,oe.daysInMonth())).$d}else W&&this.$d[W](ee);return this.init(),this},v.set=function(_,P){return this.clone().$set(_,P)},v.get=function(_){return this[D.p(_)]()},v.add=function(_,P){var E,S=this;_=Number(_);var O=D.p(P),W=function(ie){var dt=J(S);return D.w(dt.date(dt.date()+Math.round(ie*_)),S)};if(O===l)return this.set(l,this.$M+_);if(O===d)return this.set(d,this.$y+_);if(O===o)return W(1);if(O===u)return W(7);var ee=(E={},E[s]=e,E[a]=t,E[i]=r,E)[O]||1,oe=this.$d.getTime()+_*ee;return D.w(oe,this)},v.subtract=function(_,P){return this.add(-1*_,P)},v.format=function(_){var P=this,E=this.$locale();if(!this.isValid())return E.invalidDate||p;var S=_||"YYYY-MM-DDTHH:mm:ssZ",O=D.z(this),W=this.$H,ee=this.$m,oe=this.$M,ie=E.weekdays,dt=E.months,Le=function(Ne,Ce,or,Dr){return Ne&&(Ne[Ce]||Ne(P,S))||or[Ce].substr(0,Dr)},sr=function(Ne){return D.s(W%12||12,Ne,"0")},ar=E.meridiem||function(Ne,Ce,or){var Dr=Ne<12?"AM":"PM";return or?Dr.toLowerCase():Dr},ft={YY:String(this.$y).slice(-2),YYYY:this.$y,M:oe+1,MM:D.s(oe+1,2,"0"),MMM:Le(E.monthsShort,oe,dt,3),MMMM:Le(dt,oe),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:Le(E.weekdaysMin,this.$W,ie,2),ddd:Le(E.weekdaysShort,this.$W,ie,3),dddd:ie[this.$W],H:String(W),HH:D.s(W,2,"0"),h:sr(1),hh:sr(2),a:ar(W,ee,!0),A:ar(W,ee,!1),m:String(ee),mm:D.s(ee,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:O};return S.replace(m,function(Ne,Ce){return Ce||ft[Ne]||O.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(_,P,E){var S,O=D.p(P),W=J(_),ee=(W.utcOffset()-this.utcOffset())*e,oe=this-W,ie=D.m(this,W);return ie=(S={},S[d]=ie/12,S[l]=ie,S[c]=ie/3,S[u]=(oe-ee)/6048e5,S[o]=(oe-ee)/864e5,S[a]=oe/t,S[s]=oe/e,S[i]=oe/r,S)[O]||oe,E?ie:D.a(ie)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return z[this.$L]},v.locale=function(_,P){if(!_)return this.$L;var E=this.clone(),S=de(_,P,!0);return S&&(E.$L=S),E},v.clone=function(){return D.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},M}(),le=ye.prototype;return J.prototype=le,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(M){le[M[1]]=function(v){return this.$g(v,M[0],M[1])}}),J.extend=function(M,v){return M.$i||(M(v,ye,J),M.$i=!0),J},J.locale=de,J.isDayjs=re,J.unix=function(M){return J(1e3*M)},J.en=z[C],J.Ls=z,J.p={},J})});var Se=h(mr=>{"use strict";var hT=mr&&mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mr,"__esModule",{value:!0});mr.findYearClosestToRef=mr.findMostLikelyADYear=void 0;var mT=hT(K());function yT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}mr.findMostLikelyADYear=yT;function gT(r,e,t){let n=mT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}mr.findYearClosestToRef=gT});var Ie=h(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.parseTimeUnits=F.TIME_UNITS_PATTERN=F.parseYear=F.YEAR_PATTERN=F.parseOrdinalNumberPattern=F.ORDINAL_NUMBER_PATTERN=F.parseNumberPattern=F.NUMBER_PATTERN=F.TIME_UNIT_DICTIONARY=F.ORDINAL_WORD_DICTIONARY=F.INTEGER_WORD_DICTIONARY=F.MONTH_DICTIONARY=F.FULL_MONTH_NAME_DICTIONARY=F.WEEKDAY_DICTIONARY=void 0;var Ts=Q(),_T=Se();F.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};F.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};F.MONTH_DICTIONARY=Object.assign(Object.assign({},F.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});F.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};F.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};F.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};F.NUMBER_PATTERN=`(?:${Ts.matchAnyPattern(F.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function hp(r){let e=r.toLowerCase();return F.INTEGER_WORD_DICTIONARY[e]!==void 0?F.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}F.parseNumberPattern=hp;F.ORDINAL_NUMBER_PATTERN=`(?:${Ts.matchAnyPattern(F.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function TT(r){let e=r.toLowerCase();return F.ORDINAL_WORD_DICTIONARY[e]!==void 0?F.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}F.parseOrdinalNumberPattern=TT;F.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function bT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return _T.findMostLikelyADYear(e)}F.parseYear=bT;var mp=`(${F.NUMBER_PATTERN})\\s{0,3}(${Ts.matchAnyPattern(F.TIME_UNIT_DICTIONARY)})`,pp=new RegExp(mp,"i");F.TIME_UNITS_PATTERN=Ts.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",mp);function vT(r){let e={},t=r,n=pp.exec(t);for(;n;)ET(e,n),t=t.substring(n[0].length).trim(),n=pp.exec(t);return e}F.parseTimeUnits=vT;function ET(r,e){let t=hp(e[1]),n=F.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var yp=h((uo,lo)=>{(function(r,e){typeof uo=="object"&&typeof lo!="undefined"?lo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(uo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var nt=h(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.implySimilarTime=Pt.assignSimilarTime=Pt.assignSimilarDate=Pt.assignTheNextDay=void 0;var gp=Ee();function RT(r,e){e=e.add(1,"day"),_p(r,e),Tp(r,e)}Pt.assignTheNextDay=RT;function _p(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Pt.assignSimilarDate=_p;function wT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",gp.Meridiem.AM):r.assign("meridiem",gp.Meridiem.PM)}Pt.assignSimilarTime=wT;function Tp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Pt.implySimilarTime=Tp});var bp=h(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.toTimezoneOffset=Cr.TIMEZONE_ABBR_MAP=void 0;Cr.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function DT(r){var e;return r==null?null:typeof r=="number"?r:(e=Cr.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Cr.toTimezoneOffset=DT});var pe=h(Ot=>{"use strict";var vp=Ot&&Ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.ParsingResult=Ot.ParsingComponents=Ot.ReferenceWithTimezone=void 0;var MT=vp(yp()),bs=vp(K()),co=nt(),PT=bp();bs.default.extend(MT.default);var fo=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=PT.toTimezoneOffset(e.timezone))}};Ot.ReferenceWithTimezone=fo;var xr=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=bs.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new xr(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return bs.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=bs.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new xr(e);return t.hour||t.minute||t.second?(co.assignSimilarTime(i,n),co.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(co.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Ot.ParsingComponents=xr;var Wn=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new xr(e),this.end=s}clone(){let e=new Wn(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Ot.ParsingResult=Wn});var R=h(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.AbstractParserWithWordBoundaryChecking=void 0;var po=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};vs.AbstractParserWithWordBoundaryChecking=po});var Ep=h(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});var mo=Ie(),OT=pe(),AT=R(),kT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${mo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),NT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${mo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ho=class extends AT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?NT:kT}innerExtract(e,t){let n=mo.parseTimeUnits(t[1]);return OT.ParsingComponents.createRelativeFromReference(e.reference,n)}};yo.default=ho});var Op=h(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var CT=Se(),Mp=Ie(),Pp=Ie(),Es=Ie(),xT=Q(),ST=R(),IT=new RegExp(`(?:on\\s{0,3})?(${Es.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Es.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${xT.matchAnyPattern(Mp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Pp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Rp=1,wp=2,UT=3,Dp=4,go=class extends ST.AbstractParserWithWordBoundaryChecking{innerPattern(){return IT}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Mp.MONTH_DICTIONARY[t[UT].toLowerCase()],s=Es.parseOrdinalNumberPattern(t[Rp]);if(s>31)return t.index=t.index+t[Rp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Dp]){let a=Pp.parseYear(t[Dp]);n.start.assign("year",a)}else{let a=CT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[wp]){let a=Es.parseOrdinalNumberPattern(t[wp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};_o.default=go});var xp=h(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});var qT=Se(),Np=Ie(),Rs=Ie(),Cp=Ie(),FT=Q(),WT=R(),LT=new RegExp(`(${FT.matchAnyPattern(Np.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Rs.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Rs.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Cp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),YT=1,$T=2,Ap=3,kp=4,To=class extends WT.AbstractParserWithWordBoundaryChecking{innerPattern(){return LT}innerExtract(e,t){let n=Np.MONTH_DICTIONARY[t[YT].toLowerCase()],i=Rs.parseOrdinalNumberPattern(t[$T]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[kp]){let u=Cp.parseYear(t[kp]);s.assign("year",u)}else{let u=qT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Ap])return s;let a=Rs.parseOrdinalNumberPattern(t[Ap]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};bo.default=To});var Up=h(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var vo=Ie(),jT=Se(),BT=Q(),Ip=Ie(),GT=R(),HT=new RegExp(`((?:in)\\s*)?(${BT.matchAnyPattern(vo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Ip.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),zT=1,KT=2,Sp=3,Eo=class extends GT.AbstractParserWithWordBoundaryChecking{innerPattern(){return HT}innerExtract(e,t){let n=t[KT].toLowerCase();if(t[0].length<=3&&!vo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[zT]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=vo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Sp]){let a=Ip.parseYear(t[Sp]);i.start.assign("year",a)}else{let a=jT.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Ro.default=Eo});var Wp=h(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});var Fp=Ie(),VT=Q(),ZT=R(),XT=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${VT.matchAnyPattern(Fp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),QT=1,JT=2,qp=3,eb=4,wo=class extends ZT.AbstractParserWithWordBoundaryChecking{innerPattern(){return XT}innerExtract(e,t){let n=t[qp]?parseInt(t[qp]):Fp.MONTH_DICTIONARY[t[JT].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[QT]);return{day:parseInt(t[eb]),month:n,year:i}}};Do.default=wo});var Lp=h(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});var tb=R(),rb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),nb=1,ib=2,Mo=class extends tb.AbstractParserWithWordBoundaryChecking{innerPattern(){return rb}innerExtract(e,t){let n=parseInt(t[ib]),i=parseInt(t[nb]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Po.default=Mo});var Sr=h(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.AbstractTimeExpressionParser=void 0;var Be=Ee();function sb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function ab(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Yp=2,en=3,ws=4,Ds=5,Ln=6,Oo=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Yp]);if(o>100){if(this.strictMode||t[en]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[en]!=null){if(t[en].length==1&&!t[Ln])return null;s=parseInt(t[en])}if(s>=60)return null;if(o>12&&(a=Be.Meridiem.PM),t[Ln]!=null){if(o>12)return null;let u=t[Ln][0].toLowerCase();u=="a"&&(a=Be.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Be.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Be.Meridiem.AM):i.imply("meridiem",Be.Meridiem.PM),t[Ds]!=null){let u=parseInt(t[Ds].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ws]!=null){let u=parseInt(t[ws]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Ds]!=null){let u=parseInt(t[Ds].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ws]!=null){let u=parseInt(t[ws]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Yp]),a=0,o=-1;if(t[en]!=null?a=parseInt(t[en]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Be.Meridiem.PM),t[Ln]!=null){if(s>12)return null;let u=t[Ln][0].toLowerCase();u=="a"&&(o=Be.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Be.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Be.Meridiem.AM?(n.start.imply("meridiem",Be.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Be.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Be.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Be.Meridiem.PM)):s>12?i.imply("meridiem",Be.Meridiem.PM):s<=12&&i.imply("meridiem",Be.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=sb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=ab(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Ms.AbstractTimeExpressionParser=Oo});var $p=h(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var Ps=Ee(),ob=Sr(),Ao=class extends ob.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ps.Meridiem.PM)):i<6&&n.assign("meridiem",Ps.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Ps.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Ps.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};ko.default=Ao});var it=h(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.addImpliedTimeUnits=tn.reverseTimeUnits=void 0;function ub(r){let e={};for(let t in r)e[t]=-r[t];return e}tn.reverseTimeUnits=ub;function lb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}tn.addImpliedTimeUnits=lb});var jp=h(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var Co=Ie(),cb=pe(),db=R(),fb=it(),pb=new RegExp(`(${Co.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),hb=new RegExp(`(${Co.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),No=class extends db.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?hb:pb}innerExtract(e,t){let n=Co.parseTimeUnits(t[1]),i=fb.reverseTimeUnits(n);return cb.ParsingComponents.createRelativeFromReference(e.reference,i)}};xo.default=No});var Bp=h(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});var Io=Ie(),mb=pe(),yb=R(),gb=new RegExp(`(${Io.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),_b=new RegExp("("+Io.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Tb=1,So=class extends yb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?_b:gb}innerExtract(e,t){let n=Io.parseTimeUnits(t[Tb]);return mb.ParsingComponents.createRelativeFromReference(e.reference,n)}};Uo.default=So});var nn=h(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.MergingRefiner=rn.Filter=void 0;var qo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};rn.Filter=qo;var Fo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};rn.MergingRefiner=Fo});var At=h(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var bb=nn(),Wo=class extends bb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};Lo.default=Wo});var Gp=h(Yn=>{"use strict";var vb=Yn&&Yn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yn,"__esModule",{value:!0});var Eb=vb(At()),Yo=class extends Eb.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Yn.default=Yo});var Hp=h(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.mergeDateTimeComponent=sn.mergeDateTimeResult=void 0;var Rb=Ee();function wb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=$o(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=$o(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}sn.mergeDateTimeResult=wb;function $o(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Rb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}sn.mergeDateTimeComponent=$o});var jt=h(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});var Db=nn(),zp=Hp(),jo=class extends Db.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?zp.mergeDateTimeResult(t,n):zp.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Bo.default=jo});var Kp=h($n=>{"use strict";var Mb=$n&&$n.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($n,"__esModule",{value:!0});var Pb=Mb(jt()),Go=class extends Pb.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};$n.default=Go});var Vp=h(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});var Ob=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Ab={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Ho=class{constructor(e){this.timezone=Object.assign(Object.assign({},Ab),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Ob.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};zo.default=Ho});var Os=h(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var kb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Nb=1,Cb=2,xb=3,Ko=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=kb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Cb]),o=parseInt(s[xb]||"0"),u=a*60+o;u>14*60||(s[Nb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};Vo.default=Ko});var Zp=h(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var Zo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};Xo.default=Zo});var Xp=h(jn=>{"use strict";var Sb=jn&&jn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jn,"__esModule",{value:!0});var Ib=Sb(K()),Qo=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=Ib.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};jn.default=Qo});var Qp=h(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var Ub=nn(),Jo=class extends Ub.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};eu.default=Jo});var nu=h(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var qb=R(),Fb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Wb=1,Lb=2,Yb=3,Jp=4,$b=5,eh=6,th=7,rh=8,nh=9,tu=class extends qb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Fb}innerExtract(e,t){let n={};if(n.year=parseInt(t[Wb]),n.month=parseInt(t[Lb]),n.day=parseInt(t[Yb]),t[Jp]!=null)if(n.hour=parseInt(t[Jp]),n.minute=parseInt(t[$b]),t[eh]!=null&&(n.second=parseInt(t[eh])),t[th]!=null&&(n.millisecond=parseInt(t[th])),t[rh]==null)n.timezoneOffset=0;else{let i=parseInt(t[rh]),s=0;t[nh]!=null&&(s=parseInt(t[nh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};ru.default=tu});var ih=h(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});var jb=nn(),iu=class extends jb.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};su.default=iu});var Bt=h(an=>{"use strict";var Ir=an&&an.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(an,"__esModule",{value:!0});an.includeCommonConfiguration=void 0;var Bb=Ir(Vp()),Gb=Ir(Os()),sh=Ir(Zp()),Hb=Ir(Xp()),zb=Ir(Qp()),Kb=Ir(nu()),Vb=Ir(ih());function Zb(r,e=!1){return r.parsers.unshift(new Kb.default),r.refiners.unshift(new Vb.default),r.refiners.unshift(new Bb.default),r.refiners.unshift(new Gb.default),r.refiners.unshift(new sh.default),r.refiners.push(new sh.default),r.refiners.push(new Hb.default),r.refiners.push(new zb.default(e)),r}an.includeCommonConfiguration=Zb});var Ht=h(X=>{"use strict";var Xb=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(X,"__esModule",{value:!0});X.noon=X.morning=X.midnight=X.yesterdayEvening=X.evening=X.lastNight=X.tonight=X.theDayAfter=X.tomorrow=X.theDayBefore=X.yesterday=X.today=X.now=void 0;var kt=pe(),on=Xb(K()),Gt=nt(),Bn=Ee();function Qb(r){let e=on.default(r.instant),t=new kt.ParsingComponents(r,{});return Gt.assignSimilarDate(t,e),Gt.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}X.now=Qb;function Jb(r){let e=on.default(r.instant),t=new kt.ParsingComponents(r,{});return Gt.assignSimilarDate(t,e),Gt.implySimilarTime(t,e),t}X.today=Jb;function e1(r){return ah(r,1)}X.yesterday=e1;function ah(r,e){return au(r,-e)}X.theDayBefore=ah;function t1(r){return au(r,1)}X.tomorrow=t1;function au(r,e){let t=on.default(r.instant),n=new kt.ParsingComponents(r,{});return t=t.add(e,"day"),Gt.assignSimilarDate(n,t),Gt.implySimilarTime(n,t),n}X.theDayAfter=au;function r1(r,e=22){let t=on.default(r.instant),n=new kt.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",Bn.Meridiem.PM),Gt.assignSimilarDate(n,t),n}X.tonight=r1;function n1(r,e=0){let t=on.default(r.instant),n=new kt.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),Gt.assignSimilarDate(n,t),n.imply("hour",e),n}X.lastNight=n1;function i1(r,e=20){let t=new kt.ParsingComponents(r,{});return t.imply("meridiem",Bn.Meridiem.PM),t.imply("hour",e),t}X.evening=i1;function s1(r,e=20){let t=on.default(r.instant),n=new kt.ParsingComponents(r,{});return t=t.add(-1,"day"),Gt.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",Bn.Meridiem.PM),n}X.yesterdayEvening=s1;function a1(r){let e=new kt.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}X.midnight=a1;function o1(r,e=6){let t=new kt.ParsingComponents(r,{});return t.imply("meridiem",Bn.Meridiem.AM),t.imply("hour",e),t}X.morning=o1;function u1(r){let e=new kt.ParsingComponents(r,{});return e.imply("meridiem",Bn.Meridiem.AM),e.imply("hour",12),e}X.noon=u1});var oh=h(mt=>{"use strict";var l1=mt&&mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),c1=mt&&mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),d1=mt&&mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&l1(e,r,t);return c1(e,r),e},f1=mt&&mt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mt,"__esModule",{value:!0});var p1=f1(K()),h1=R(),m1=nt(),Gn=d1(Ht()),y1=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,ou=class extends h1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return y1}innerExtract(e,t){let n=p1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Gn.now(e.reference);case"today":return Gn.today(e.reference);case"yesterday":return Gn.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Gn.tomorrow(e.reference);case"tonight":return Gn.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),m1.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};mt.default=ou});var uh=h(Hn=>{"use strict";var g1=Hn&&Hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hn,"__esModule",{value:!0});var As=Ee(),_1=R(),T1=g1(K()),b1=nt(),v1=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,uu=class extends _1.AbstractParserWithWordBoundaryChecking{innerPattern(){return v1}innerExtract(e,t){let n=T1.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",As.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",As.Meridiem.PM),i.imply("hour",20);break;case"midnight":b1.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",As.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",As.Meridiem.AM),i.imply("hour",12);break}return i}};Hn.default=uu});var Ur=h(yr=>{"use strict";var E1=yr&&yr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yr,"__esModule",{value:!0});yr.toDayJSClosestWeekday=yr.toDayJSWeekday=void 0;var lh=E1(K());function R1(r,e,t){if(!t)return ch(r,e);let n=lh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}yr.toDayJSWeekday=R1;function ch(r,e){let t=lh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}yr.toDayJSClosestWeekday=ch});var fh=h(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var dh=Ie(),w1=Q(),D1=R(),M1=Ur(),P1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${w1.matchAnyPattern(dh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),O1=1,A1=2,k1=3,lu=class extends D1.AbstractParserWithWordBoundaryChecking{innerPattern(){return P1}innerExtract(e,t){let n=t[A1].toLowerCase(),i=dh.WEEKDAY_DICTIONARY[n],s=t[O1],a=t[k1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=M1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};cu.default=lu});var mh=h(zn=>{"use strict";var N1=zn&&zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zn,"__esModule",{value:!0});var hh=Ie(),ph=pe(),C1=N1(K()),x1=R(),S1=Q(),I1=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${S1.matchAnyPattern(hh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),U1=1,q1=2,du=class extends x1.AbstractParserWithWordBoundaryChecking{innerPattern(){return I1}innerExtract(e,t){let n=t[U1].toLowerCase(),i=t[q1].toLowerCase(),s=hh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,ph.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,ph.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=C1.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};zn.default=du});var yt=h(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.ParsingContext=cn.Chrono=void 0;var un=pe(),F1=fu(),ln=class{constructor(e){e=e||F1.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new ln({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new ks(e,t,n),s=[];return this.parsers.forEach(a=>{let o=ln.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof un.ParsingResult?c=l:l instanceof un.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};cn.Chrono=ln;var ks=class{constructor(e,t,n){this.text=e,this.reference=new un.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof un.ParsingComponents?e:new un.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new un.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};cn.ParsingContext=ks});var qr=h(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var yh=Se(),W1=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Ns=1,gh=5,_h=2,Th=3,pu=4,hu=class{constructor(e){this.groupNumberMonth=e?Th:_h,this.groupNumberDay=e?_h:Th}pattern(){return W1}extract(e,t){if(t[Ns]=="/"||t[gh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Ns].length,i=t[0].substr(t[Ns].length,t[0].length-t[Ns].length-t[gh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[pu]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[pu]){let u=parseInt(t[pu]),l=yh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=yh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};mu.default=hu});var vh=h(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});var bh=Ie(),L1=pe(),Y1=R(),$1=it(),j1=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${bh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),yu=class extends Y1.AbstractParserWithWordBoundaryChecking{innerPattern(){return j1}innerExtract(e,t){let n=t[1].toLowerCase(),i=bh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=$1.reverseTimeUnits(i);break}return L1.ParsingComponents.createRelativeFromReference(e.reference,i)}};gu.default=yu});var Rh=h(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var B1=nn(),_u=pe(),G1=Ie(),H1=it();function Eh(r){return r.text.match(/\s+(before|from)$/i)!=null}function z1(r){return r.text.match(/\s+(after|since)$/i)!=null}var Tu=class extends B1.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Eh(t)&&!z1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=G1.parseTimeUnits(t.text);Eh(t)&&(i=H1.reverseTimeUnits(i));let s=_u.ParsingComponents.createRelativeFromReference(new _u.ReferenceWithTimezone(n.start.date()),i);return new _u.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};bu.default=Tu});var fu=h(_e=>{"use strict";var we=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.createConfiguration=_e.createCasualConfiguration=_e.parseDate=_e.parse=_e.GB=_e.strict=_e.casual=void 0;var K1=we(Ep()),V1=we(Op()),Z1=we(xp()),X1=we(Up()),Q1=we(Wp()),J1=we(Lp()),ev=we($p()),tv=we(jp()),rv=we(Bp()),nv=we(Gp()),iv=we(Kp()),sv=Bt(),av=we(oh()),ov=we(uh()),uv=we(fh()),lv=we(mh()),vu=yt(),cv=we(qr()),dv=we(vh()),fv=we(Rh());_e.casual=new vu.Chrono(wh(!1));_e.strict=new vu.Chrono(Cs(!0,!1));_e.GB=new vu.Chrono(Cs(!1,!0));function pv(r,e,t){return _e.casual.parse(r,e,t)}_e.parse=pv;function hv(r,e,t){return _e.casual.parseDate(r,e,t)}_e.parseDate=hv;function wh(r=!1){let e=Cs(!1,r);return e.parsers.unshift(new av.default),e.parsers.unshift(new ov.default),e.parsers.unshift(new X1.default),e.parsers.unshift(new lv.default),e.parsers.unshift(new dv.default),e}_e.createCasualConfiguration=wh;function Cs(r=!0,e=!1){return sv.includeCommonConfiguration({parsers:[new cv.default(e),new K1.default,new V1.default,new Z1.default,new uv.default,new Q1.default,new J1.default,new ev.default(r),new tv.default(r),new rv.default(r)],refiners:[new fv.default,new iv.default,new nv.default]},r)}_e.createConfiguration=Cs});var Dh=h(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var mv=Sr(),Eu=class extends mv.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Ru.default=Eu});var Kn=h(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.parseTimeUnits=te.TIME_UNITS_PATTERN=te.parseYear=te.YEAR_PATTERN=te.parseNumberPattern=te.NUMBER_PATTERN=te.TIME_UNIT_DICTIONARY=te.INTEGER_WORD_DICTIONARY=te.MONTH_DICTIONARY=te.WEEKDAY_DICTIONARY=void 0;var wu=Q(),yv=Se();te.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};te.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};te.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};te.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};te.NUMBER_PATTERN=`(?:${wu.matchAnyPattern(te.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Ph(r){let e=r.toLowerCase();return te.INTEGER_WORD_DICTIONARY[e]!==void 0?te.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}te.parseNumberPattern=Ph;te.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function gv(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return yv.findMostLikelyADYear(e)}te.parseYear=gv;var Oh=`(${te.NUMBER_PATTERN})\\s{0,5}(${wu.matchAnyPattern(te.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Mh=new RegExp(Oh,"i");te.TIME_UNITS_PATTERN=wu.repeatedTimeunitPattern("",Oh);function _v(r){let e={},t=r,n=Mh.exec(t);for(;n;)Tv(e,n),t=t.substring(n[0].length),n=Mh.exec(t);return e}te.parseTimeUnits=_v;function Tv(r,e){let t=Ph(e[1]),n=te.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var kh=h(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var Ah=Kn(),bv=Q(),vv=R(),Ev=Ur(),Rv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${bv.matchAnyPattern(Ah.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),wv=1,Dv=3,Mv=2,Du=class extends vv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Rv}innerExtract(e,t){let n=t[Mv].toLowerCase(),i=Ah.WEEKDAY_DICTIONARY[n],s=t[wv],a=t[Dv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=Ev.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Mu.default=Du});var Sh=h(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var gr=Ee(),Pv=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Ov=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Av=2,Nh=3,Ch=4,xh=5,dn=class{pattern(e){return Pv}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=dn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Ov.exec(i);return s&&(n.end=dn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Av]),t[Nh]!=null&&(i=parseInt(t[Nh])),i>=60||n>24)return null;if(n>=12&&(s=gr.Meridiem.PM),t[xh]!=null){if(n>12)return null;let a=t[xh].toLowerCase();a.match(/morgen|vormittag/)&&(s=gr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=gr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=gr.Meridiem.AM,n=0):n<6?s=gr.Meridiem.AM:(s=gr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",gr.Meridiem.AM):e.imply("meridiem",gr.Meridiem.PM),t[Ch]!=null){let a=parseInt(t[Ch]);if(a>=60)return null;e.assign("second",a)}return e}};Pu.default=dn});var Ih=h(Vn=>{"use strict";var kv=Vn&&Vn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vn,"__esModule",{value:!0});var Nv=kv(At()),Ou=class extends Nv.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};Vn.default=Ou});var Uh=h(Zn=>{"use strict";var Cv=Zn&&Zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});var xv=Cv(jt()),Au=class extends xv.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};Zn.default=Au});var ku=h(Qn=>{"use strict";var Sv=Qn&&Qn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qn,"__esModule",{value:!0});var Iv=Sv(K()),Fr=Ee(),Uv=R(),qv=nt(),Fv=it(),Xn=class extends Uv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=Iv.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return qv.implySimilarTime(s,n),Xn.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=Fv.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Fr.Meridiem.AM);break}return e}};Qn.default=Xn});var Wh=h(gt=>{"use strict";var Wv=gt&&gt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Lv=gt&&gt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Yv=gt&&gt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Wv(e,r,t);return Lv(e,r),e},Fh=gt&&gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gt,"__esModule",{value:!0});var $v=Fh(K()),jv=R(),Wr=nt(),Bv=Fh(ku()),qh=Yv(Ht()),Gv=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),Hv=1,zv=2,Nu=class extends jv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Gv}innerExtract(e,t){let n=$v.default(e.refDate),i=(t[Hv]||"").toLowerCase(),s=(t[zv]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=qh.now(e.reference);break;case"heute":a=qh.today(e.reference);break;case"morgen":Wr.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Wr.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Wr.assignSimilarDate(a,n),Wr.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Wr.assignSimilarDate(a,n),Wr.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Wr.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=Bv.default.extractTimeComponents(a,s)),a}};gt.default=Nu});var Gh=h(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var Kv=Se(),jh=Kn(),Bh=Kn(),Vv=Q(),Zv=R(),Xv=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${Vv.matchAnyPattern(jh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Bh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Lh=1,Yh=2,Qv=3,$h=4,Cu=class extends Zv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Xv}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=jh.MONTH_DICTIONARY[t[Qv].toLowerCase()],s=parseInt(t[Lh]);if(s>31)return t.index=t.index+t[Lh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[$h]){let a=Bh.parseYear(t[$h]);n.start.assign("year",a)}else{let a=Kv.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Yh]){let a=parseInt(t[Yh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};xu.default=Cu});var Hh=h(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});var xs=Kn(),Jv=pe(),eE=R(),tE=it(),rE=Q(),Su=class extends eE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${xs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${rE.matchAnyPattern(xs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?xs.parseNumberPattern(t[2]):1,i=xs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=tE.reverseTimeUnits(s)),Jv.ParsingComponents.createRelativeFromReference(e.reference,s)}};Iu.default=Su});var Vh=h(De=>{"use strict";var _t=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=void 0;var nE=Bt(),zh=yt(),iE=_t(qr()),sE=_t(nu()),aE=_t(Dh()),oE=_t(kh()),uE=_t(Sh()),lE=_t(Ih()),cE=_t(Uh()),dE=_t(Wh()),fE=_t(ku()),pE=_t(Gh()),hE=_t(Hh());De.casual=new zh.Chrono(Kh());De.strict=new zh.Chrono(Uu(!0));function mE(r,e,t){return De.casual.parse(r,e,t)}De.parse=mE;function yE(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=yE;function Kh(r=!0){let e=Uu(!1,r);return e.parsers.unshift(new fE.default),e.parsers.unshift(new dE.default),e.parsers.unshift(new hE.default),e}De.createCasualConfiguration=Kh;function Uu(r=!0,e=!0){return nE.includeCommonConfiguration({parsers:[new sE.default,new iE.default(e),new aE.default,new uE.default,new pE.default,new oE.default],refiners:[new lE.default,new cE.default]},r)}De.createConfiguration=Uu});var Xh=h(Tt=>{"use strict";var gE=Tt&&Tt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_E=Tt&&Tt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),TE=Tt&&Tt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gE(e,r,t);return _E(e,r),e},bE=Tt&&Tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tt,"__esModule",{value:!0});var vE=bE(K()),EE=Ee(),RE=R(),Zh=nt(),Ss=TE(Ht()),qu=class extends RE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=vE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Ss.now(e.reference);case"aujourd'hui":return Ss.today(e.reference);case"hier":return Ss.yesterday(e.reference);case"demain":return Ss.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(Zh.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",EE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),Zh.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Tt.default=qu});var Qh=h(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Jn=Ee(),wE=R(),Fu=class extends wE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Jn.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Jn.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Jn.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Jn.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Jn.Meridiem.AM);break}return i}};Wu.default=Fu});var Jh=h(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var DE=Sr(),Lu=class extends DE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Yu.default=Lu});var em=h(ei=>{"use strict";var ME=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var PE=ME(jt()),$u=class extends PE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};ei.default=$u});var tm=h(ti=>{"use strict";var OE=ti&&ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ti,"__esModule",{value:!0});var AE=OE(At()),ju=class extends AE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};ti.default=ju});var _r=h(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.parseTimeUnits=V.TIME_UNITS_PATTERN=V.parseYear=V.YEAR_PATTERN=V.parseOrdinalNumberPattern=V.ORDINAL_NUMBER_PATTERN=V.parseNumberPattern=V.NUMBER_PATTERN=V.TIME_UNIT_DICTIONARY=V.INTEGER_WORD_DICTIONARY=V.MONTH_DICTIONARY=V.WEEKDAY_DICTIONARY=void 0;var Bu=Q();V.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};V.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};V.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};V.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};V.NUMBER_PATTERN=`(?:${Bu.matchAnyPattern(V.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function nm(r){let e=r.toLowerCase();return V.INTEGER_WORD_DICTIONARY[e]!==void 0?V.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}V.parseNumberPattern=nm;V.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function kE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}V.parseOrdinalNumberPattern=kE;V.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function NE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}V.parseYear=NE;var im=`(${V.NUMBER_PATTERN})\\s{0,5}(${Bu.matchAnyPattern(V.TIME_UNIT_DICTIONARY)})\\s{0,5}`,rm=new RegExp(im,"i");V.TIME_UNITS_PATTERN=Bu.repeatedTimeunitPattern("",im);function CE(r){let e={},t=r,n=rm.exec(t);for(;n;)xE(e,n),t=t.substring(n[0].length),n=rm.exec(t);return e}V.parseTimeUnits=CE;function xE(r,e){let t=nm(e[1]),n=V.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var am=h(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var sm=_r(),SE=Q(),IE=R(),UE=Ur(),qE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${SE.matchAnyPattern(sm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),FE=1,WE=2,Gu=class extends IE.AbstractParserWithWordBoundaryChecking{innerPattern(){return qE}innerExtract(e,t){let n=t[FE].toLowerCase(),i=sm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[WE];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=UE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Hu.default=Gu});var cm=h(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});var ri=Ee(),LE=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),YE=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),$E=2,om=3,um=4,lm=5,fn=class{pattern(e){return LE}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=fn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=YE.exec(i);return s&&(n.end=fn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[$E]),t[om]!=null&&(i=parseInt(t[om])),i>=60||n>24)return null;if(n>=12&&(s=ri.Meridiem.PM),t[lm]!=null){if(n>12)return null;let a=t[lm][0].toLowerCase();a=="a"&&(s=ri.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=ri.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",ri.Meridiem.AM):e.imply("meridiem",ri.Meridiem.PM),t[um]!=null){let a=parseInt(t[um]);if(a>=60)return null;e.assign("second",a)}return e}};zu.default=fn});var ym=h(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var jE=Se(),hm=_r(),mm=_r(),Is=_r(),BE=Q(),GE=R(),HE=new RegExp(`(?:on\\s*?)?(${Is.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Is.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${BE.matchAnyPattern(hm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${mm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),dm=1,fm=2,zE=3,pm=4,Ku=class extends GE.AbstractParserWithWordBoundaryChecking{innerPattern(){return HE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=hm.MONTH_DICTIONARY[t[zE].toLowerCase()],s=Is.parseOrdinalNumberPattern(t[dm]);if(s>31)return t.index=t.index+t[dm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[pm]){let a=mm.parseYear(t[pm]);n.start.assign("year",a)}else{let a=jE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[fm]){let a=Is.parseOrdinalNumberPattern(t[fm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Vu.default=Ku});var _m=h(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var gm=_r(),KE=pe(),VE=R(),ZE=it(),Zu=class extends VE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${gm.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=gm.parseTimeUnits(t[1]),i=ZE.reverseTimeUnits(n);return KE.ParsingComponents.createRelativeFromReference(e.reference,i)}};Xu.default=Zu});var bm=h(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});var Tm=_r(),XE=pe(),QE=R(),Qu=class extends QE.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Tm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Tm.parseTimeUnits(t[1]);return XE.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ju.default=Qu});var vm=h(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var Us=_r(),JE=pe(),e0=R(),t0=it(),r0=Q(),el=class extends e0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Us.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${r0.matchAnyPattern(Us.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Us.parseNumberPattern(t[1]):1,i=Us.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=t0.reverseTimeUnits(s)),JE.ParsingComponents.createRelativeFromReference(e.reference,s)}};tl.default=el});var wm=h(Me=>{"use strict";var st=Me&&Me.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Me,"__esModule",{value:!0});Me.createConfiguration=Me.createCasualConfiguration=Me.parseDate=Me.parse=Me.strict=Me.casual=void 0;var n0=Bt(),Em=yt(),i0=st(Xh()),s0=st(Qh()),a0=st(qr()),o0=st(Jh()),u0=st(em()),l0=st(tm()),c0=st(am()),d0=st(cm()),f0=st(ym()),p0=st(_m()),h0=st(bm()),m0=st(vm());Me.casual=new Em.Chrono(Rm());Me.strict=new Em.Chrono(rl(!0));function y0(r,e,t){return Me.casual.parse(r,e,t)}Me.parse=y0;function g0(r,e,t){return Me.casual.parseDate(r,e,t)}Me.parseDate=g0;function Rm(r=!0){let e=rl(!1,r);return e.parsers.unshift(new i0.default),e.parsers.unshift(new s0.default),e.parsers.unshift(new m0.default),e}Me.createCasualConfiguration=Rm;function rl(r=!0,e=!0){return n0.includeCommonConfiguration({parsers:[new a0.default(e),new f0.default,new o0.default,new d0.default,new p0.default,new h0.default,new c0.default],refiners:[new u0.default,new l0.default]},r)}Me.createConfiguration=rl});var Dm=h(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.toHankaku=void 0;function _0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,T0)}qs.toHankaku=_0;function T0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Pm=h(ni=>{"use strict";var b0=ni&&ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});var nl=Dm(),v0=Se(),E0=b0(K()),R0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Mm=1,w0=2,il=3,D0=4,M0=5,P0=6,sl=class{pattern(){return R0}extract(e,t){let n=parseInt(nl.toHankaku(t[M0])),i=parseInt(nl.toHankaku(t[P0])),s=e.createParsingComponents({day:i,month:n});if(t[Mm]&&t[Mm].match("\u540C|\u4ECA|\u672C")){let a=E0.default(e.refDate);s.assign("year",a.year())}if(t[w0]){let a=t[D0],o=a=="\u5143"?1:parseInt(nl.toHankaku(a));t[il]=="\u4EE4\u548C"?o+=2018:t[il]=="\u5E73\u6210"?o+=1988:t[il]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=v0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};ni.default=sl});var Om=h(ii=>{"use strict";var O0=ii&&ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ii,"__esModule",{value:!0});var A0=O0(At()),al=class extends A0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};ii.default=al});var km=h(bt=>{"use strict";var k0=bt&&bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),N0=bt&&bt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),C0=bt&&bt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&k0(e,r,t);return N0(e,r),e},x0=bt&&bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});var S0=x0(K()),Am=Ee(),ol=C0(Ht()),I0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,ul=class{pattern(){return I0}extract(e,t){let n=t[0],i=S0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return ol.yesterday(e.reference);case"\u660E\u65E5":return ol.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return ol.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Am.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Am.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};bt.default=ul});var xm=h(Pe=>{"use strict";var ll=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var U0=ll(Pm()),q0=ll(Om()),F0=ll(km()),Nm=yt();Pe.casual=new Nm.Chrono(Cm());Pe.strict=new Nm.Chrono(cl());function W0(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=W0;function L0(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=L0;function Cm(){let r=cl();return r.parsers.unshift(new F0.default),r}Pe.createCasualConfiguration=Cm;function cl(){return{parsers:[new U0.default],refiners:[new q0.default]}}Pe.createConfiguration=cl});var Fs=h(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.parseYear=Nt.YEAR_PATTERN=Nt.MONTH_DICTIONARY=Nt.WEEKDAY_DICTIONARY=void 0;Nt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};Nt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};Nt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function Y0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}Nt.parseYear=Y0});var Im=h(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var Sm=Fs(),$0=Q(),j0=R(),B0=Ur(),G0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${$0.matchAnyPattern(Sm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),H0=1,z0=2,K0=3,dl=class extends j0.AbstractParserWithWordBoundaryChecking{innerPattern(){return G0}innerExtract(e,t){let n=t[z0].toLowerCase(),i=Sm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[H0],a=t[K0],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=B0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};fl.default=dl});var Um=h(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var V0=Sr(),pl=class extends V0.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};hl.default=pl});var qm=h(si=>{"use strict";var Z0=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var X0=Z0(jt()),ml=class extends X0.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};si.default=ml});var Fm=h(ai=>{"use strict";var Q0=ai&&ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ai,"__esModule",{value:!0});var J0=Q0(At()),yl=class extends J0.default{patternBetween(){return/^\s*(?:-)\s*$/i}};ai.default=yl});var Bm=h(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var eR=Se(),$m=Fs(),jm=Fs(),tR=Q(),rR=R(),nR=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${tR.matchAnyPattern($m.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${jm.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Wm=1,Lm=2,iR=3,Ym=4,gl=class extends rR.AbstractParserWithWordBoundaryChecking{innerPattern(){return nR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=$m.MONTH_DICTIONARY[t[iR].toLowerCase()],s=parseInt(t[Wm]);if(s>31)return t.index=t.index+t[Wm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ym]){let a=jm.parseYear(t[Ym]);n.start.assign("year",a)}else{let a=eR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Lm]){let a=parseInt(t[Lm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};_l.default=gl});var Gm=h(zt=>{"use strict";var sR=zt&&zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aR=zt&&zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),oR=zt&&zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&sR(e,r,t);return aR(e,r),e};Object.defineProperty(zt,"__esModule",{value:!0});var uR=R(),Ws=oR(Ht()),Tl=class extends uR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Ws.now(e.reference);case"hoje":return Ws.today(e.reference);case"amanha":case"amanh\xE3":return Ws.tomorrow(e.reference);case"ontem":return Ws.yesterday(e.reference)}return i}};zt.default=Tl});var Hm=h(oi=>{"use strict";var lR=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});var Ls=Ee(),cR=R(),dR=nt(),fR=lR(K()),bl=class extends cR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=fR.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Ls.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Ls.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Ls.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":dR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Ls.Meridiem.AM),i.imply("hour",12);break}return i}};oi.default=bl});var Vm=h(Oe=>{"use strict";var Tr=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var pR=Bt(),zm=yt(),hR=Tr(qr()),mR=Tr(Im()),yR=Tr(Um()),gR=Tr(qm()),_R=Tr(Fm()),TR=Tr(Bm()),bR=Tr(Gm()),vR=Tr(Hm());Oe.casual=new zm.Chrono(Km());Oe.strict=new zm.Chrono(vl(!0));function ER(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=ER;function RR(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=RR;function Km(r=!0){let e=vl(!1,r);return e.parsers.push(new bR.default),e.parsers.push(new vR.default),e}Oe.createCasualConfiguration=Km;function vl(r=!0,e=!0){return pR.includeCommonConfiguration({parsers:[new hR.default(e),new mR.default,new yR.default,new TR.default],refiners:[new gR.default,new _R.default]},r)}Oe.createConfiguration=vl});var Zm=h(ui=>{"use strict";var wR=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var DR=wR(At()),El=class extends DR.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};ui.default=El});var Xm=h(li=>{"use strict";var MR=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var PR=MR(jt()),Rl=class extends PR.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};li.default=Rl});var Qm=h(Kt=>{"use strict";var OR=Kt&&Kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),AR=Kt&&Kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),kR=Kt&&Kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&OR(e,r,t);return AR(e,r),e};Object.defineProperty(Kt,"__esModule",{value:!0});var NR=R(),Ys=kR(Ht()),wl=class extends NR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Ys.now(e.reference);case"vandaag":return Ys.today(e.reference);case"morgen":case"morgend":return Ys.tomorrow(e.reference);case"gisteren":return Ys.yesterday(e.reference)}return i}};Kt.default=wl});var Jm=h(ci=>{"use strict";var CR=ci&&ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ci,"__esModule",{value:!0});var $s=Ee(),xR=R(),SR=CR(K()),IR=nt(),UR=1,qR=2,Dl=class extends xR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=SR.default(e.refDate),i=e.createParsingComponents();switch(t[UR]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[qR].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",$s.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",$s.Meridiem.PM),i.imply("hour",20);break;case"middernacht":IR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",$s.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",$s.Meridiem.AM),i.imply("hour",12);break}return i}};ci.default=Dl});var Xe=h(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var js=Q(),FR=Se();j.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};j.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};j.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};j.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};j.NUMBER_PATTERN=`(?:${js.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function ty(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}j.parseNumberPattern=ty;j.ORDINAL_NUMBER_PATTERN=`(?:${js.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function WR(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=WR;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function LR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return FR.findMostLikelyADYear(e)}j.parseYear=LR;var ry=`(${j.NUMBER_PATTERN})\\s{0,5}(${js.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})\\s{0,5}`,ey=new RegExp(ry,"i");j.TIME_UNITS_PATTERN=js.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",ry);function YR(r){let e={},t=r,n=ey.exec(t);for(;n;)$R(e,n),t=t.substring(n[0].length),n=ey.exec(t);return e}j.parseTimeUnits=YR;function $R(r,e){let t=ty(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var iy=h(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var ny=Xe(),jR=pe(),BR=R(),Ml=class extends BR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+ny.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=ny.parseTimeUnits(t[1]);return jR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Pl.default=Ml});var ay=h(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var sy=Xe(),GR=Q(),HR=R(),zR=Ur(),KR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${GR.matchAnyPattern(sy.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),VR=1,ZR=2,XR=3,Ol=class extends HR.AbstractParserWithWordBoundaryChecking{innerPattern(){return KR}innerExtract(e,t){let n=t[ZR].toLowerCase(),i=sy.WEEKDAY_DICTIONARY[n],s=t[VR],a=t[XR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=zR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Al.default=Ol});var fy=h(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var QR=Se(),cy=Xe(),Bs=Xe(),dy=Xe(),JR=Q(),ew=R(),tw=new RegExp(`(?:on\\s*?)?(${Bs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Bs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+JR.matchAnyPattern(cy.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${dy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),rw=3,oy=1,uy=2,ly=4,kl=class extends ew.AbstractParserWithWordBoundaryChecking{innerPattern(){return tw}innerExtract(e,t){let n=cy.MONTH_DICTIONARY[t[rw].toLowerCase()],i=Bs.parseOrdinalNumberPattern(t[oy]);if(i>31)return t.index=t.index+t[oy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[ly]){let u=dy.parseYear(t[ly]);s.assign("year",u)}else{let u=QR.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[uy])return s;let a=Bs.parseOrdinalNumberPattern(t[uy]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Nl.default=kl});var yy=h(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var hy=Xe(),nw=Se(),iw=Q(),my=Xe(),sw=R(),aw=new RegExp(`(${iw.matchAnyPattern(hy.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${my.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),ow=1,py=2,Cl=class extends sw.AbstractParserWithWordBoundaryChecking{innerPattern(){return aw}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[ow],s=hy.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[py]){let a=my.parseYear(t[py]);n.assign("year",a)}else{let a=nw.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};xl.default=Cl});var gy=h(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var uw=R(),lw=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),cw=1,dw=2,Sl=class extends uw.AbstractParserWithWordBoundaryChecking{innerPattern(){return lw}innerExtract(e,t){let n=parseInt(t[dw]),i=parseInt(t[cw]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Il.default=Sl});var _y=h(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var fw=Sr(),Ul=class extends fw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};ql.default=Ul});var vy=h(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});var by=Xe(),pw=Q(),hw=R(),mw=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${pw.matchAnyPattern(by.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),yw=1,gw=2,Ty=3,_w=4,Fl=class extends hw.AbstractParserWithWordBoundaryChecking{innerPattern(){return mw}innerExtract(e,t){let n=t[Ty]?parseInt(t[Ty]):by.MONTH_DICTIONARY[t[gw].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[yw]);return{day:parseInt(t[_w]),month:n,year:i}}};Wl.default=Fl});var Ey=h(di=>{"use strict";var Tw=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var bw=R(),Gs=Ee(),Ll=nt(),vw=Tw(K()),Ew=1,Rw=2,Yl=class extends bw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[Ew].toLowerCase(),i=t[Rw].toLowerCase(),s=e.createParsingComponents(),a=vw.default(e.refDate);switch(n){case"gisteren":Ll.assignSimilarDate(s,a.add(-1,"day"));break;case"van":Ll.assignSimilarDate(s,a);break;case"morgen":Ll.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Gs.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Gs.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Gs.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Gs.Meridiem.PM),s.imply("hour",20);break}return s}};di.default=Yl});var wy=h(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var Ry=Xe(),ww=pe(),Dw=R(),Mw=it(),Pw=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Ry.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),$l=class extends Dw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Pw}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ry.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=Mw.reverseTimeUnits(i);break}return ww.ParsingComponents.createRelativeFromReference(e.reference,i)}};jl.default=$l});var Py=h(fi=>{"use strict";var Ow=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var My=Xe(),Dy=pe(),Aw=Ow(K()),kw=R(),Nw=Q(),Cw=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${Nw.matchAnyPattern(My.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),xw=1,Sw=2,Bl=class extends kw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Cw}innerExtract(e,t){let n=t[xw].toLowerCase(),i=t[Sw].toLowerCase(),s=My.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Dy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Dy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Aw.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};fi.default=Bl});var Oy=h(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var Hl=Xe(),Iw=pe(),Uw=R(),qw=it(),Fw=new RegExp("("+Hl.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),Ww=new RegExp("("+Hl.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Gl=class extends Uw.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Ww:Fw}innerExtract(e,t){let n=Hl.parseTimeUnits(t[1]),i=qw.reverseTimeUnits(n);return Iw.ParsingComponents.createRelativeFromReference(e.reference,i)}};zl.default=Gl});var Ay=h(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var Vl=Xe(),Lw=pe(),Yw=R(),$w=new RegExp("("+Vl.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),jw=new RegExp("("+Vl.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),Bw=1,Kl=class extends Yw.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?jw:$w}innerExtract(e,t){let n=Vl.parseTimeUnits(t[Bw]);return Lw.ParsingComponents.createRelativeFromReference(e.reference,n)}};Zl.default=Kl});var xy=h(Ae=>{"use strict";var Ue=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var Gw=Bt(),ky=yt(),Hw=Ue(Zm()),zw=Ue(Xm()),Kw=Ue(Qm()),Vw=Ue(Jm()),Zw=Ue(qr()),Xw=Ue(iy()),Qw=Ue(ay()),Jw=Ue(fy()),Ny=Ue(yy()),eD=Ue(gy()),tD=Ue(_y()),rD=Ue(vy()),nD=Ue(Ey()),iD=Ue(wy()),sD=Ue(Py()),aD=Ue(Oy()),oD=Ue(Ay());Ae.casual=new ky.Chrono(Cy());Ae.strict=new ky.Chrono(Xl(!0));function uD(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=uD;function lD(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=lD;function Cy(r=!0){let e=Xl(!1,r);return e.parsers.unshift(new Kw.default),e.parsers.unshift(new Vw.default),e.parsers.unshift(new nD.default),e.parsers.unshift(new Ny.default),e.parsers.unshift(new sD.default),e.parsers.unshift(new iD.default),e}Ae.createCasualConfiguration=Cy;function Xl(r=!0,e=!0){return Gw.includeCommonConfiguration({parsers:[new Zw.default(e),new Xw.default,new Jw.default,new Ny.default,new Qw.default,new rD.default,new eD.default,new tD.default(r),new aD.default(r),new oD.default(r)],refiners:[new zw.default,new Hw.default]},r)}Ae.createConfiguration=Xl});var qy=h(pi=>{"use strict";var cD=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var dD=cD(K()),fD=R(),pD=1,Sy=2,hD=3,Iy=4,Uy=5,mD=6,Ql=class extends fD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=dD.default(e.refDate),a=s;if(t[pD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Sy]){let o=t[Sy],u=t[hD];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Iy]){let u=t[Iy][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Uy]){let o=t[Uy];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[mD];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};pi.default=Ql});var pn=h(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.zhStringToYear=He.zhStringToNumber=He.WEEKDAY_OFFSET=He.NUMBER=void 0;He.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};He.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function yD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?He.NUMBER[n]:e*He.NUMBER[n]:e+=He.NUMBER[n]}return e}He.zhStringToNumber=yD;function gD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+He.NUMBER[n]}return parseInt(e)}He.zhStringToYear=gD});var Wy=h(hi=>{"use strict";var _D=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var TD=_D(K()),bD=R(),Lr=pn(),Jl=1,Fy=2,ec=3,tc=class extends bD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Lr.NUMBER).join("")+"]{4}|["+Object.keys(Lr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Lr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Lr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=TD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Fy]);if(isNaN(s)&&(s=Lr.zhStringToNumber(t[Fy])),i.start.assign("month",s),t[ec]){let a=parseInt(t[ec]);isNaN(a)&&(a=Lr.zhStringToNumber(t[ec])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Jl]){let a=parseInt(t[Jl]);isNaN(a)&&(a=Lr.zhStringToYear(t[Jl])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};hi.default=tc});var Yy=h(mi=>{"use strict";var vD=mi&&mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mi,"__esModule",{value:!0});var ED=vD(K()),RD=R(),Ly=pn(),wD=new RegExp("(\\d+|["+Object.keys(Ly.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),rc=1,DD=2,nc=class extends RD.AbstractParserWithWordBoundaryChecking{innerPattern(){return wD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[rc]);if(isNaN(i)&&(i=Ly.zhStringToNumber(t[rc])),isNaN(i)){let u=t[rc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=ED.default(e.refDate),o=t[DD][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};mi.default=nc});var jy=h(yi=>{"use strict";var MD=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var PD=MD(K()),OD=R(),$y=pn(),AD=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys($y.WEEKDAY_OFFSET).join("|")+")"),ic=class extends OD.AbstractParserWithWordBoundaryChecking{innerPattern(){return AD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=$y.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=PD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};yi.default=ic});var By=h(gi=>{"use strict";var kD=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var ND=kD(K()),CD=R(),ot=pn(),xD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ot.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ot.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ot.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),SD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ot.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ot.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ot.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Hs=1,zs=2,Ks=3,Vs=4,Zs=5,Xs=6,at=7,hn=8,Qs=9,sc=class extends CD.AbstractParserWithWordBoundaryChecking{innerPattern(){return xD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=ND.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Hs]){var a=t[Hs];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Vs]){var o=t[Vs];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[hn]){var d=parseInt(t[hn]);if(isNaN(d)&&(d=ot.zhStringToNumber(t[hn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[Xs]),isNaN(u)&&(u=ot.zhStringToNumber(t[Xs])),t[at]?t[at]=="\u534A"?l=30:t[at]=="\u6B63"||t[at]=="\u6574"?l=0:(l=parseInt(t[at]),isNaN(l)&&(l=ot.zhStringToNumber(t[at]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Qs]){if(u>12)return null;var f=t[Qs][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[zs]){var p=t[zs],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ks]){var m=t[Ks],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Zs]){var A=t[Zs],x=A[0];x=="\u4E0A"||x=="\u671D"||x=="\u65E9"||x=="\u51CC"?(c=0,u==12&&(u=0)):(x=="\u4E0B"||x=="\u664F"||x=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=SD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let C=s.clone();if(i.end=e.createParsingComponents(),t[Hs]){var a=t[Hs];a=="\u660E"||a=="\u807D"?n.hour()>1&&C.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?C.add(-1,"day"):a=="\u524D"?C.add(-2,"day"):a=="\u5927\u524D"?C.add(-3,"day"):a=="\u5F8C"?C.add(2,"day"):a=="\u5927\u5F8C"&&C.add(3,"day"),i.end.assign("day",C.date()),i.end.assign("month",C.month()+1),i.end.assign("year",C.year())}else if(t[Vs]){var o=t[Vs];o=="\u660E"||o=="\u807D"?C.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?C.add(-1,"day"):o=="\u524D"?C.add(-2,"day"):o=="\u5927\u524D"?C.add(-3,"day"):o=="\u5F8C"?C.add(2,"day"):o=="\u5927\u5F8C"&&C.add(3,"day"),i.end.assign("day",C.date()),i.end.assign("month",C.month()+1),i.end.assign("year",C.year())}else i.end.imply("day",C.date()),i.end.imply("month",C.month()+1),i.end.imply("year",C.year());if(u=0,l=0,c=-1,t[hn]){var d=parseInt(t[hn]);if(isNaN(d)&&(d=ot.zhStringToNumber(t[hn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[Xs]),isNaN(u)&&(u=ot.zhStringToNumber(t[Xs])),t[at]?t[at]=="\u534A"?l=30:t[at]=="\u6B63"||t[at]=="\u6574"?l=0:(l=parseInt(t[at]),isNaN(l)&&(l=ot.zhStringToNumber(t[at]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Qs]){if(u>12)return null;var f=t[Qs][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[zs]){var p=t[zs],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ks]){var m=t[Ks],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Zs]){var A=t[Zs],x=A[0];x=="\u4E0A"||x=="\u671D"||x=="\u65E9"||x=="\u51CC"?(c=0,u==12&&(u=0)):(x=="\u4E0B"||x=="\u664F"||x=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};gi.default=sc});var Hy=h(_i=>{"use strict";var ID=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var UD=ID(K()),qD=R(),Gy=pn(),FD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Gy.WEEKDAY_OFFSET).join("|")+")"),ac=class extends qD.AbstractParserWithWordBoundaryChecking{innerPattern(){return FD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Gy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=UD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};_i.default=ac});var zy=h(Ti=>{"use strict";var WD=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var LD=WD(At()),oc=class extends LD.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ti.default=oc});var Ky=h(bi=>{"use strict";var YD=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var $D=YD(jt()),uc=class extends $D.default{patternBetween(){return/^\s*$/i}};bi.default=uc});var Vy=h(Te=>{"use strict";var Vt=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.strict=Te.casual=Te.hant=void 0;var lc=yt(),jD=Vt(Os()),BD=Bt(),GD=Vt(qy()),HD=Vt(Wy()),zD=Vt(Yy()),KD=Vt(jy()),VD=Vt(By()),ZD=Vt(Hy()),XD=Vt(zy()),QD=Vt(Ky());Te.hant=new lc.Chrono(cc());Te.casual=new lc.Chrono(cc());Te.strict=new lc.Chrono(dc());function JD(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=JD;function eM(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=eM;function cc(){let r=dc();return r.parsers.unshift(new GD.default),r}Te.createCasualConfiguration=cc;function dc(){let r=BD.includeCommonConfiguration({parsers:[new HD.default,new KD.default,new ZD.default,new VD.default,new zD.default],refiners:[new XD.default,new QD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof jD.default)),r}Te.createConfiguration=dc});var Jy=h(vi=>{"use strict";var tM=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var rM=tM(K()),nM=R(),iM=1,Zy=2,sM=3,Xy=4,Qy=5,aM=6,fc=class extends nM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=rM.default(e.refDate),a=s;if(t[iM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Zy]){let o=t[Zy],u=t[sM];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Xy]){let u=t[Xy][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Qy]){let o=t[Qy];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[aM];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};vi.default=fc});var mn=h(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.zhStringToYear=ze.zhStringToNumber=ze.WEEKDAY_OFFSET=ze.NUMBER=void 0;ze.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function oM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ze.NUMBER[n]:e*ze.NUMBER[n]:e+=ze.NUMBER[n]}return e}ze.zhStringToNumber=oM;function uM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ze.NUMBER[n]}return parseInt(e)}ze.zhStringToYear=uM});var tg=h(Ei=>{"use strict";var lM=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var cM=lM(K()),dM=R(),Yr=mn(),pc=1,eg=2,hc=3,mc=class extends dM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Yr.NUMBER).join("")+"]{4}|["+Object.keys(Yr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Yr.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Yr.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=cM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[eg]);if(isNaN(s)&&(s=Yr.zhStringToNumber(t[eg])),i.start.assign("month",s),t[hc]){let a=parseInt(t[hc]);isNaN(a)&&(a=Yr.zhStringToNumber(t[hc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[pc]){let a=parseInt(t[pc]);isNaN(a)&&(a=Yr.zhStringToYear(t[pc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ei.default=mc});var ng=h(Ri=>{"use strict";var fM=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var pM=fM(K()),hM=R(),rg=mn(),mM=new RegExp("(\\d+|["+Object.keys(rg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),yc=1,yM=2,gc=class extends hM.AbstractParserWithWordBoundaryChecking{innerPattern(){return mM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[yc]);if(isNaN(i)&&(i=rg.zhStringToNumber(t[yc])),isNaN(i)){let u=t[yc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=pM.default(e.refDate),o=t[yM][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Ri.default=gc});var sg=h(wi=>{"use strict";var gM=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var _M=gM(K()),TM=R(),ig=mn(),bM=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(ig.WEEKDAY_OFFSET).join("|")+")"),_c=class extends TM.AbstractParserWithWordBoundaryChecking{innerPattern(){return bM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ig.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=_M.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};wi.default=_c});var ag=h(Di=>{"use strict";var vM=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var EM=vM(K()),RM=R(),lt=mn(),wM=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),DM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Js=1,ea=2,ta=3,ra=4,na=5,ia=6,ut=7,yn=8,sa=9,Tc=class extends RM.AbstractParserWithWordBoundaryChecking{innerPattern(){return wM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=EM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Js]){let c=t[Js];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[ra]){let c=t[ra];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[yn]){let c=parseInt(t[yn]);if(isNaN(c)&&(c=lt.zhStringToNumber(t[yn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ia]),isNaN(a)&&(a=lt.zhStringToNumber(t[ia])),t[ut]?t[ut]=="\u534A"?o=30:t[ut]=="\u6B63"||t[ut]=="\u6574"?o=0:(o=parseInt(t[ut]),isNaN(o)&&(o=lt.zhStringToNumber(t[ut]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[sa]){if(a>12)return null;let c=t[sa][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ea]){let d=t[ea][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[ta]){let d=t[ta][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[na]){let d=t[na][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=DM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Js]){let c=t[Js];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[ra]){let c=t[ra];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[yn]){let c=parseInt(t[yn]);if(isNaN(c)&&(c=lt.zhStringToNumber(t[yn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ia]),isNaN(a)&&(a=lt.zhStringToNumber(t[ia])),t[ut]?t[ut]=="\u534A"?o=30:t[ut]=="\u6B63"||t[ut]=="\u6574"?o=0:(o=parseInt(t[ut]),isNaN(o)&&(o=lt.zhStringToNumber(t[ut]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[sa]){if(a>12)return null;let c=t[sa][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ea]){let d=t[ea][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[ta]){let d=t[ta][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[na]){let d=t[na][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Di.default=Tc});var ug=h(Mi=>{"use strict";var MM=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var PM=MM(K()),OM=R(),og=mn(),AM=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(og.WEEKDAY_OFFSET).join("|")+")"),bc=class extends OM.AbstractParserWithWordBoundaryChecking{innerPattern(){return AM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=og.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=PM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Mi.default=bc});var lg=h(Pi=>{"use strict";var kM=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var NM=kM(At()),vc=class extends NM.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Pi.default=vc});var cg=h(Oi=>{"use strict";var CM=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var xM=CM(jt()),Ec=class extends xM.default{patternBetween(){return/^\s*$/i}};Oi.default=Ec});var dg=h(be=>{"use strict";var Zt=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hans=void 0;var Rc=yt(),SM=Zt(Os()),IM=Bt(),UM=Zt(Jy()),qM=Zt(tg()),FM=Zt(ng()),WM=Zt(sg()),LM=Zt(ag()),YM=Zt(ug()),$M=Zt(lg()),jM=Zt(cg());be.hans=new Rc.Chrono(wc());be.casual=new Rc.Chrono(wc());be.strict=new Rc.Chrono(Dc());function BM(r,e,t){return be.casual.parse(r,e,t)}be.parse=BM;function GM(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=GM;function wc(){let r=Dc();return r.parsers.unshift(new UM.default),r}be.createCasualConfiguration=wc;function Dc(){let r=IM.includeCommonConfiguration({parsers:[new qM.default,new WM.default,new YM.default,new LM.default,new FM.default],refiners:[new $M.default,new jM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof SM.default)),r}be.createConfiguration=Dc});var pg=h(Qe=>{"use strict";var fg=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),HM=Qe&&Qe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),zM=Qe&&Qe.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&fg(e,r,t)},KM=Qe&&Qe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fg(e,r,t);return HM(e,r),e};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.hans=void 0;zM(Vy(),Qe);Qe.hans=KM(dg())});var Ke=h(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.parseTimeUnits=q.TIME_UNITS_PATTERN=q.parseYear=q.YEAR_PATTERN=q.parseOrdinalNumberPattern=q.ORDINAL_NUMBER_PATTERN=q.parseNumberPattern=q.NUMBER_PATTERN=q.TIME_UNIT_DICTIONARY=q.ORDINAL_WORD_DICTIONARY=q.INTEGER_WORD_DICTIONARY=q.MONTH_DICTIONARY=q.FULL_MONTH_NAME_DICTIONARY=q.WEEKDAY_DICTIONARY=q.REGEX_PARTS=void 0;var aa=Q(),VM=Se();q.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};q.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};q.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};q.MONTH_DICTIONARY=Object.assign(Object.assign({},q.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});q.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};q.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};q.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};q.NUMBER_PATTERN=`(?:${aa.matchAnyPattern(q.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function mg(r){let e=r.toLowerCase();return q.INTEGER_WORD_DICTIONARY[e]!==void 0?q.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}q.parseNumberPattern=mg;q.ORDINAL_NUMBER_PATTERN=`(?:${aa.matchAnyPattern(q.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function ZM(r){let e=r.toLowerCase();return q.ORDINAL_WORD_DICTIONARY[e]!==void 0?q.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}q.parseOrdinalNumberPattern=ZM;var Mc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";q.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Mc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Mc}|[5-9][0-9]${Mc})`;function XM(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return VM.findMostLikelyADYear(e)}q.parseYear=XM;var yg=`(${q.NUMBER_PATTERN})\\s{0,3}(${aa.matchAnyPattern(q.TIME_UNIT_DICTIONARY)})`,hg=new RegExp(yg,"i");q.TIME_UNITS_PATTERN=aa.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",yg);function QM(r){let e={},t=r,n=hg.exec(t);for(;n;)JM(e,n),t=t.substring(n[0].length).trim(),n=hg.exec(t);return e}q.parseTimeUnits=QM;function JM(r,e){let t=mg(e[1]),n=q.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var _g=h(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var Ai=Ke(),eP=pe(),tP=R(),gg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Ai.TIME_UNITS_PATTERN})${Ai.REGEX_PARTS.rightBoundary}`,rP=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${gg}`,Ai.REGEX_PARTS.flags),nP=new RegExp(gg,"i"),Pc=class extends tP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ai.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?nP:rP}innerExtract(e,t){let n=Ai.parseTimeUnits(t[1]);return eP.ParsingComponents.createRelativeFromReference(e.reference,n)}};Oc.default=Pc});var Rg=h(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var iP=Se(),ki=Ke(),Eg=Ke(),oa=Ke(),sP=Q(),aP=R(),oP=new RegExp(`(?:\u0441)?\\s*(${oa.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${oa.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${sP.matchAnyPattern(ki.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Eg.YEAR_PATTERN}(?![^\\s]\\d)))?${ki.REGEX_PARTS.rightBoundary}`,ki.REGEX_PARTS.flags),Tg=1,bg=2,uP=3,vg=4,Ac=class extends aP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ki.REGEX_PARTS.leftBoundary}innerPattern(){return oP}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ki.MONTH_DICTIONARY[t[uP].toLowerCase()],s=oa.parseOrdinalNumberPattern(t[Tg]);if(s>31)return t.index=t.index+t[Tg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[vg]){let a=Eg.parseYear(t[vg]);n.start.assign("year",a)}else{let a=iP.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[bg]){let a=oa.parseOrdinalNumberPattern(t[bg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};kc.default=Ac});var Mg=h(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});var Ni=Ke(),lP=Se(),cP=Q(),Dg=Ke(),dP=R(),fP=new RegExp(`((?:\u0432)\\s*)?(${cP.matchAnyPattern(Ni.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Dg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Ni.REGEX_PARTS.flags),pP=2,wg=3,Nc=class extends dP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ni.REGEX_PARTS.leftBoundary}innerPattern(){return fP}innerExtract(e,t){let n=t[pP].toLowerCase();if(t[0].length<=3&&!Ni.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Ni.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[wg]){let a=Dg.parseYear(t[wg]);i.start.assign("year",a)}else{let a=lP.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Cc.default=Nc});var Og=h(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var ua=Ee(),hP=Sr(),Pg=Ke(),xc=class extends hP.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Pg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Pg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",ua.Meridiem.PM)):i<6&&n.assign("meridiem",ua.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",ua.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",ua.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Sc.default=xc});var Ag=h(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});var la=Ke(),mP=pe(),yP=R(),gP=it(),_P=new RegExp(`(${la.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,la.REGEX_PARTS.flags),Ic=class extends yP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return la.REGEX_PARTS.leftBoundary}innerPattern(){return _P}innerExtract(e,t){let n=la.parseTimeUnits(t[1]),i=gP.reverseTimeUnits(n);return mP.ParsingComponents.createRelativeFromReference(e.reference,i)}};Uc.default=Ic});var kg=h(Ci=>{"use strict";var TP=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var bP=TP(At()),qc=class extends bP.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Ci.default=qc});var Ng=h(xi=>{"use strict";var vP=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var EP=vP(jt()),Fc=class extends EP.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};xi.default=Fc});var Cg=h(Xt=>{"use strict";var RP=Xt&&Xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),wP=Xt&&Xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),DP=Xt&&Xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&RP(e,r,t);return wP(e,r),e};Object.defineProperty(Xt,"__esModule",{value:!0});var MP=R(),Si=DP(Ht()),Wc=Ke(),PP=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Wc.REGEX_PARTS.rightBoundary}`,Wc.REGEX_PARTS.flags),Lc=class extends MP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Wc.REGEX_PARTS.leftBoundary}innerPattern(e){return PP}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Si.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Si.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Si.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Si.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Si.theDayBefore(e.reference,2)}return i}};Xt.default=Lc});var xg=h(vt=>{"use strict";var OP=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),AP=vt&&vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),kP=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&OP(e,r,t);return AP(e,r),e},NP=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});var CP=R(),$r=kP(Ht()),xP=nt(),SP=NP(K()),Yc=Ke(),IP=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Yc.REGEX_PARTS.rightBoundary}`,Yc.REGEX_PARTS.flags),$c=class extends CP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Yc.REGEX_PARTS.leftBoundary}innerPattern(){return IP}innerExtract(e,t){let n=SP.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return $r.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return $r.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return $r.morning(e.reference);if(i.match(/в\s*полдень/))return $r.noon(e.reference);if(i.match(/прошлой\s*ночью/))return $r.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return $r.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),xP.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?$r.midnight(e.reference):s}};vt.default=$c});var Sg=h(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var Ii=Ke(),UP=Q(),qP=R(),FP=Ur(),WP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${UP.matchAnyPattern(Ii.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Ii.REGEX_PARTS.rightBoundary}`,Ii.REGEX_PARTS.flags),LP=1,YP=2,$P=3,jc=class extends qP.AbstractParserWithWordBoundaryChecking{innerPattern(){return WP}patternLeftBoundary(){return Ii.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[YP].toLowerCase(),i=Ii.WEEKDAY_DICTIONARY[n],s=t[LP],a=t[$P],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=FP.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Bc.default=jc});var Ug=h(qi=>{"use strict";var jP=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var Ui=Ke(),Ig=pe(),BP=jP(K()),GP=R(),HP=Q(),zP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${HP.matchAnyPattern(Ui.TIME_UNIT_DICTIONARY)})(?=\\s*)${Ui.REGEX_PARTS.rightBoundary}`,Ui.REGEX_PARTS.flags),KP=1,VP=2,Gc=class extends GP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ui.REGEX_PARTS.leftBoundary}innerPattern(){return zP}innerExtract(e,t){let n=t[KP].toLowerCase(),i=t[VP].toLowerCase(),s=Ui.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Ig.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Ig.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=BP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};qi.default=Gc});var qg=h(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var Fi=Ke(),ZP=pe(),XP=R(),QP=it(),JP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Fi.TIME_UNITS_PATTERN})${Fi.REGEX_PARTS.rightBoundary}`,Fi.REGEX_PARTS.flags),Hc=class extends XP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Fi.REGEX_PARTS.leftBoundary}innerPattern(){return JP}innerExtract(e,t){let n=t[1].toLowerCase(),i=Fi.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=QP.reverseTimeUnits(i);break}return ZP.ParsingComponents.createRelativeFromReference(e.reference,i)}};zc.default=Hc});var Lg=h(ke=>{"use strict";var Je=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var eO=Je(_g()),tO=Je(Rg()),rO=Je(Mg()),nO=Je(Og()),iO=Je(Ag()),sO=Je(kg()),aO=Je(Ng()),oO=Bt(),uO=Je(Cg()),lO=Je(xg()),cO=Je(Sg()),dO=Je(Ug()),Fg=yt(),fO=Je(qr()),pO=Je(qg());ke.casual=new Fg.Chrono(Wg());ke.strict=new Fg.Chrono(Kc(!0));function hO(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=hO;function mO(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=mO;function Wg(){let r=Kc(!1);return r.parsers.unshift(new uO.default),r.parsers.unshift(new lO.default),r.parsers.unshift(new rO.default),r.parsers.unshift(new dO.default),r.parsers.unshift(new pO.default),r}ke.createCasualConfiguration=Wg;function Kc(r=!0){return oO.includeCommonConfiguration({parsers:[new fO.default(!0),new eO.default,new tO.default,new cO.default,new nO.default(r),new iO.default],refiners:[new aO.default,new sO.default]},r)}ke.createConfiguration=Kc});var Ee=h(L=>{"use strict";var yO=L&&L.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gO=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),br=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yO(e,r,t);return gO(e,r),e};Object.defineProperty(L,"__esModule",{value:!0});L.parseDate=L.parse=L.casual=L.strict=L.ru=L.zh=L.nl=L.pt=L.ja=L.fr=L.de=L.Meridiem=L.Chrono=L.en=void 0;var Vc=br(fu());L.en=Vc;var _O=yt();Object.defineProperty(L,"Chrono",{enumerable:!0,get:function(){return _O.Chrono}});var TO;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(TO=L.Meridiem||(L.Meridiem={}));var bO=br(Vh());L.de=bO;var vO=br(wm());L.fr=vO;var EO=br(xm());L.ja=EO;var RO=br(Vm());L.pt=RO;var wO=br(xy());L.nl=wO;var DO=br(pg());L.zh=DO;var MO=br(Lg());L.ru=MO;L.strict=Vc.strict;L.casual=Vc.casual;function PO(r,e,t){return L.casual.parse(r,e,t)}L.parse=PO;function OO(r,e,t){return L.casual.parseDate(r,e,t)}L.parseDate=OO});var xt=h(wr=>{"use strict";wr.__esModule=!0;var UO;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(UO=wr.Operators||(wr.Operators={}));var qO;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(qO=wr.StructuralCharacters||(wr.StructuralCharacters={}));var FO;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(FO=wr.Tokens||(wr.Tokens={}))});var ud=h(Aa=>{"use strict";Aa.__esModule=!0;var he=xt();Aa.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Aa.VALID_TOKENS={identifierOnly:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS},{name:he.Tokens.OPERATOR,value:he.Operators.NOT}],binaryOperator:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR}],binaryOperatorOrClose:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.CLOSE_PARENTHESIS}]}});var ld=h(er=>{"use strict";er.__esModule=!0;var Tn=xt();er.STRUCTURAL_CHARACTERS={"(":Tn.StructuralCharacters.OPEN_PARENTHESIS,")":Tn.StructuralCharacters.CLOSE_PARENTHESIS};er.OPERATORS={AND:Tn.Operators.AND,OR:Tn.Operators.OR,XOR:Tn.Operators.XOR,NOT:Tn.Operators.NOT};er.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));er.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);er.COMMENT_DELIMITER=String.fromCodePoint(35);er.EOL=String.fromCodePoint(10);er.ESCAPE_CHARACTER=String.fromCodePoint(92)});var Xg=h(tr=>{"use strict";var cd=tr&&tr.__assign||function(){return cd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},cd.apply(this,arguments)};tr.__esModule=!0;var Zg=xt(),jr=ld();tr.createResult=function(r,e,t){return{token:cd({name:r},e!==null?{value:e}:{}),remainingString:t}};tr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===jr.EOL){e=t;break}}return tr.createResult(Zg.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};tr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===jr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+jr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===jr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!jr.SEPARATORS.has(s)&&!jr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+jr.QUOTED_IDENTIFIER_DELIMITER+" character");return tr.createResult(Zg.Tokens.IDENTIFIER,t,r.slice(n+1))}});var Qg=h(dd=>{"use strict";dd.__esModule=!0;var bn=xt(),et=ld(),vn=Xg();dd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!et.SEPARATORS.has(s)){var a=et.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===bn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!et.SEPARATORS.has(o)&&o!==bn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return vn.createResult(bn.Tokens.STRUCTURAL_CHARACTER,et.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===et.QUOTED_IDENTIFIER_DELIMITER)return vn.getQuotedIdentifier(r.slice(i+1));if(s===et.COMMENT_DELIMITER)return vn.getComment(r.slice(i+1));e=i}}else if(et.SEPARATORS.has(s)||et.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===et.QUOTED_IDENTIFIER_DELIMITER||s===et.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(et.OPERATORS[u]){if(n&&!et.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return vn.createResult(bn.Tokens.OPERATOR,et.OPERATORS[u],l)}else return vn.createResult(bn.Tokens.IDENTIFIER,u,l)}return vn.createResult(bn.Tokens.EOF,null,"")}});var Jg=h(rr=>{"use strict";var WO=rr&&rr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};rr.__esModule=!0;var LO=Qg(),En=xt(),ka=ud();rr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=LO.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==En.Tokens.COMMENT)return rr.validateToken(s,t,n),s}}};rr.getValue=function(r,e){var t=r(ka.VALID_TOKENS.identifierOrNot),n=t.value===En.Operators.NOT;n&&(t=r(ka.VALID_TOKENS.identifierOnly));var i=t.name===En.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?WO(i,[{name:En.Tokens.OPERATOR,value:En.Operators.NOT}]):i};rr.previousOperatorTakesPrecedent=function(r,e){return ka.OPERATOR_PRECEDENCE[r]<=ka.OPERATOR_PRECEDENCE[e]};rr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===En.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var pd=h(Hi=>{"use strict";var Rn=Hi&&Hi.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Hi.__esModule=!0;var e_=xt(),t_=ud(),Na=Jg();Hi.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Na.newTokenGenerator(r);return fd(e)};var fd=function(r,e){e===void 0&&(e=!1);for(var t=Rn(Na.getValue(r,fd)),n=[];;){var i=e?t_.VALID_TOKENS.binaryOperatorOrClose:t_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===e_.Tokens.EOF||s.name===e_.Tokens.STRUCTURAL_CHARACTER)return Rn(t,Rn(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Na.previousOperatorTakesPrecedent(a.value,s.value))t=Rn(t,[a]),n=n.slice(0,-1);else break}n=Rn(n,[s]),t=Rn(t,Na.getValue(r,fd))}}});var hd=h(nr=>{"use strict";nr.__esModule=!0;var r_=xt();nr.andUtil=function(r,e){return r&&e};nr.orUtil=function(r,e){return r||e};nr.xorUtil=function(r,e){return r!==e};nr.notUtil=function(r){return!r};nr.isIdentifier=function(r){var e=r.name,t=r.value;return e===r_.Tokens.IDENTIFIER&&typeof t=="string"};nr.isOperator=function(r){var e=r.name,t=r.value;return e===r_.Tokens.OPERATOR&&typeof t=="string"};nr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var n_=h(gd=>{"use strict";var zi;gd.__esModule=!0;var md=xt(),yd=hd();gd.OPERATOR_MAP=(zi={},zi[md.Operators.AND]=yd.andUtil,zi[md.Operators.OR]=yd.orUtil,zi[md.Operators.XOR]=yd.xorUtil,zi)});var s_=h(Gr=>{"use strict";var _d=Gr&&Gr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Gr.__esModule=!0;var YO=pd(),i_=xt(),$O=n_(),Br=hd();Gr.getEvaluator=function(r){var e=YO.parse(r);return function(t){return Gr.evaluate(e,t)}};Gr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Br.isIdentifier(i)||Br.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===i_.Tokens.IDENTIFIER)return _d(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===i_.Operators.NOT)return o===void 0&&Br.throwInvalidExpression("missing identifier"),_d(n.slice(0,-1),[Br.notUtil(o)]);(o===void 0||a===void 0)&&Br.throwInvalidExpression("missing identifier");var u=$O.OPERATOR_MAP[i.value];return u||Br.throwInvalidExpression("unknown operator"),_d(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Br.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var o_=h(Ki=>{"use strict";Ki.__esModule=!0;var a_=s_();Ki.getEvaluator=a_.getEvaluator;Ki.evaluate=a_.evaluate;var jO=pd();Ki.parse=jO.parse});var ZO={};b_(ZO,{default:()=>qa});module.exports=v_(ZO);var f_=require("obsidian");var ps=require("obsidian");var QO=new Error("timeout while waiting for mutex to become available"),JO=new Error("mutex already locked"),E_=new Error("request for lock canceled"),Bd=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},$a=class{constructor(e,t=E_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return Bd(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return Bd(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},R_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},is=class{constructor(e){this._semaphore=new $a(1,e)}acquire(){return R_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Qf=require("obsidian");var Gd=require("obsidian");var w_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6},ja=$e({},w_),ne=()=>$e({},ja),qt=r=>(ja=$e($e({},ja),r),ne());var Ba,Ga,Hd=({metadataCache:r,vault:e})=>{Ba=r,Ga=e},ss=t=>se(void 0,[t],function*({originalTask:r,newTasks:e}){if(Ga===void 0||Ba===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),zd({originalTask:r,newTasks:e,vault:Ga,metadataCache:Ba,previousTries:0})}),zd=s=>se(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{zd({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof Gd.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=ne(),p,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){p=g;break}y++}}if(p===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,p.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(p.position.start.line+1)];yield t.modify(o,m.join(`
`))});var Kr=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.shortMode=!1}};var as=["MO","TU","WE","TH","FR","SA","SU"],ge=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(as.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=as[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ae=function(r){return r!=null},Ve=function(r){return typeof r=="number"},Ha=function(r){return typeof r=="string"&&as.includes(r)},xe=Array.isArray,tt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var B=function(r,e){var t=0,n=[];if(xe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Kd=function(r){return xe(r)?r:[r]};function Pr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=B(t,e/t.length)),t.slice(0,e)+String(n))}var Vd=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},qe=function(r,e){var t=r%e;return t*e<0?t+e:t},os=function(r,e){return{div:Math.floor(r/e),mod:qe(r,e)}},Ze=function(r){return!ae(r)||r.length===0},me=function(r){return!Ze(r)},G=function(r,e){return me(r)&&r.indexOf(e)!==-1};var lr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Pr(n.getUTCFullYear().toString(),4,"0"),Pr(n.getUTCMonth()+1,2,"0"),Pr(n.getUTCDate(),2,"0"),"T",Pr(n.getUTCHours(),2,"0"),Pr(n.getUTCMinutes(),2,"0"),Pr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(lr||(lr={}));var k=lr;var D_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Ft=D_;var Tf=ns(_f(),1),{__extends:Zr,__assign:je,__rest:hA,__decorate:mA,__param:yA,__metadata:gA,__awaiter:_A,__generator:TA,__exportStar:bA,__createBinding:vA,__values:EA,__read:RA,__spread:wA,__spreadArrays:DA,__spreadArray:T,__await:MA,__asyncGenerator:PA,__asyncDelegator:OA,__asyncValues:AA,__makeTemplateObject:kA,__importStar:NA,__importDefault:CA,__classPrivateFieldGet:xA,__classPrivateFieldSet:SA,__classPrivateFieldIn:IA}=Tf.default;var M_=function(r){Zr(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Ft),Ka=M_;var P_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Or=P_;var bf=function(r,e){return r.indexOf(e)!==-1},O_=function(r){return r.toString()},A_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},k_=function(){function r(e,t,n,i){if(t===void 0&&(t=O_),n===void 0&&(n=Or),i===void 0&&(i=A_),this.text=[],this.language=n||Or,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ae(this.origOptions.byweekday)){var o=xe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(bf(["dtstart","wkst","freq"],n))return!0;if(!bf(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[w.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Ve(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),xe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Et=k_;var N_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function An(r,e){e===void 0&&(e=Or);var t={},n=new N_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=w.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=w.WEEKLY,t.byweekday=[w.MO,w.TU,w.WE,w.TH,w.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=w.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=w.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=w.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=w.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=w.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=w.WEEKLY;var p=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[w[p]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(w[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=w.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),p=n.accept("the");if(!!(f||p))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(w[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(w[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[w.MO,w.TU,w.WE,w.TH,w.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var A=n.acceptNumber();if(!A)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(A[0],10)];n.accept("comma");){if(A=n.acceptNumber(),!A)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(A[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var p=n.acceptNumber();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(p[0],10)];n.accept("comma");){if(p=n.acceptNumber(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(p[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var Y;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(Y||(Y={}));function kn(r){return r<Y.HOURLY}var vf=function(r,e){return e===void 0&&(e=Or),new w(An(r,e)||void 0)},Xr=["count","until","interval","byweekday","bymonthday","bymonth"];Et.IMPLEMENTED=[];Et.IMPLEMENTED[Y.HOURLY]=Xr;Et.IMPLEMENTED[Y.MINUTELY]=Xr;Et.IMPLEMENTED[Y.DAILY]=["byhour"].concat(Xr);Et.IMPLEMENTED[Y.WEEKLY]=Xr;Et.IMPLEMENTED[Y.MONTHLY]=Xr;Et.IMPLEMENTED[Y.YEARLY]=["byweekno","byyearday"].concat(Xr);var Ef=function(r,e,t,n){return new Et(r,e,t,n).toString()},Rf=Et.isFullyConvertible;var Qr=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var wf=function(r){Zr(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return lr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=qe(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=os(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Ze(i)||G(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=os(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Ze(i)||G(i,this.hour))&&(Ze(s)||G(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=os(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Ze(i)||G(i,this.hour))&&(Ze(s)||G(s,this.minute))&&(Ze(a)||G(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=lr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>lr.MAXYEAR))return;t=lr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case Y.YEARLY:return this.addYears(s);case Y.MONTHLY:return this.addMonths(s);case Y.WEEKLY:return this.addWeekly(s,a);case Y.DAILY:return this.addDaily(s);case Y.HOURLY:return this.addHours(s,n,o);case Y.MINUTELY:return this.addMinutes(s,n,o,u);case Y.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(Qr);function Va(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];G(Pf,s)||e.push(s),k.isDate(r[s])&&!k.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return je({},r)}function Df(r){var e=je(je({},Nn),Va(r));if(ae(e.byeaster)&&(e.freq=w.YEARLY),!(ae(e.freq)&&w.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ae(e.wkst)?Ve(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=w.MO.weekday,ae(e.bysetpos)){Ve(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||me(e.byweekno)||me(e.byyearday)||Boolean(e.bymonthday)||me(e.bymonthday)||ae(e.byweekday)||ae(e.byeaster)))switch(e.freq){case w.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case w.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case w.WEEKLY:e.byweekday=[k.getWeekday(e.dtstart)];break}if(ae(e.bymonth)&&!xe(e.bymonth)&&(e.bymonth=[e.bymonth]),ae(e.byyearday)&&!xe(e.byyearday)&&Ve(e.byyearday)&&(e.byyearday=[e.byyearday]),!ae(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(xe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ae(e.byweekno)&&!xe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ae(e.byweekday))e.bynweekday=null;else if(Ve(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Ha(e.byweekday))e.byweekday=[ge.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ge)!e.byweekday.n||e.freq>w.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Ve(u)){a.push(u);continue}else if(Ha(u)){a.push(ge.fromStr(u).weekday);continue}!u.n||e.freq>w.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=me(a)?a:null,e.bynweekday=me(o)?o:null}return ae(e.byhour)?Ve(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<w.HOURLY?[e.dtstart.getUTCHours()]:null,ae(e.byminute)?Ve(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<w.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ae(e.bysecond)?Ve(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<w.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Mf(r){var e=r.dtstart.getTime()%1e3;if(!kn(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new Qr(n,i,s,e))})})}),t}function xn(r){var e=r.split(`
`).map(C_).filter(function(t){return t!==null});return je(je({},e[0]),e[1])}function Cn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=k.untilStringToDate(i),e}function C_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return Of(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return Of(r);case"DTSTART":return Cn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function Of(r){var e=r.replace(/^RRULE:/i,""),t=Cn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=Y[o.toUpperCase()];break;case"WKST":t.wkst=rt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=x_(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=S_(o);break;case"DTSTART":case"TZID":var c=Cn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=k.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function x_(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Af)}return Af(r)}function Af(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function S_(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return rt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=rt[s].weekday;return new ge(a,i)})}var Ar=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=k.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Sn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Nn),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!G(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ae(o)||xe(o)&&!o.length)){switch(a){case"FREQ":u=w.FREQUENCIES[r.freq];break;case"WKST":Ve(o)?u=new ge(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=Kd(o).map(function(p){return p instanceof ge?p:xe(p)?new ge(p[0],p[1]):new ge(p)}).toString();break;case"DTSTART":t=I_(o,r.tzid);break;case"UNTIL":u=k.timeToUntilString(o,!r.tzid);break;default:if(xe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(p){var y=p[0],m=p[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(p){return!!p}).join(`
`)}function I_(r,e){return r?"DTSTART"+new Ar(new Date(r),e).toString():""}function U_(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var kf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?k.clone(t):k.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!U_(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(xe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Ft(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return xe(n)?k.cloneDates(n):n instanceof Date?k.clone(n):n},r}();var Nf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,28),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),Cf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,29),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),q_=tt(1,29),F_=tt(1,30),cr=tt(1,31),Fe=tt(1,32),xf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Fe,!0),F_,!0),Fe,!0),cr,!0),Fe,!0),cr,!0),Fe,!0),Fe,!0),cr,!0),Fe,!0),cr,!0),Fe,!0),Fe.slice(0,7),!0),Sf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Fe,!0),q_,!0),Fe,!0),cr,!0),Fe,!0),cr,!0),Fe,!0),Fe,!0),cr,!0),Fe,!0),cr,!0),Fe,!0),Fe.slice(0,7),!0),W_=tt(-28,0),L_=tt(-29,0),dr=tt(-30,0),We=tt(-31,0),If=T(T(T(T(T(T(T(T(T(T(T(T(T([],We,!0),L_,!0),We,!0),dr,!0),We,!0),dr,!0),We,!0),We,!0),dr,!0),We,!0),dr,!0),We,!0),We.slice(0,7),!0),Uf=T(T(T(T(T(T(T(T(T(T(T(T(T([],We,!0),W_,!0),We,!0),dr,!0),We,!0),dr,!0),We,!0),We,!0),dr,!0),We,!0),dr,!0),We,!0),We.slice(0,7),!0),qf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Ff=[0,31,59,90,120,151,181,212,243,273,304,334,365],Za=function(){for(var r=[],e=0;e<55;e++)r=r.concat(tt(7));return r}();function Wf(r,e){var t=new Date(Date.UTC(r,0,1)),n=k.isLeapYear(r)?366:365,i=k.isLeapYear(r+1)?366:365,s=k.toOrdinal(t),a=k.getWeekday(t),o=je(je({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},Y_(r)),{wnomask:null});if(Ze(e.byweekno))return o;o.wnomask=B(0,n+7);var u,l,c=u=qe(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+qe(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=qe(l,7),p=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=p+1),m>0&&m<=p){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var A=0;A<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);A++);}}if(G(e.byweekno,1)){var g=c+p*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var x=void 0;if(G(e.byweekno,-1))x=-1;else{var C=k.getWeekday(new Date(Date.UTC(r-1,0,1))),z=qe(7-C.valueOf()+e.wkst,7),re=k.isLeapYear(r-1)?366:365,de=void 0;z>=4?(z=0,de=re+qe(C-e.wkst,7)):de=n-c,x=Math.floor(52+qe(de,7)/4)}if(G(e.byweekno,x))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function Y_(r){var e=k.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=k.getWeekday(t);return e===365?{mmask:Nf,mdaymask:Sf,nmdaymask:Uf,wdaymask:Za.slice(n),mrange:Ff}:{mmask:Cf,mdaymask:xf,nmdaymask:If,wdaymask:Za.slice(n),mrange:qf}}function Lf(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===w.YEARLY)if(Ze(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===w.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Ze(o))return a;a.nwdaymask=B(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var p=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(p=d+(g+1)*7,p-=qe(i[p]-m,7)):(p=c+(g-1)*7,p+=qe(7-i[p]+m,7)),c<=p&&p<=d&&(a.nwdaymask[p]=1)}return a}function Yf(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,p=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*p+114)/31),m=(l+f-7*p+114)%31+1,g=Date.UTC(r,y-1,m+e),A=Date.UTC(r,0,1);return[Math.ceil((g-A)/(1e3*60*60*24))]}var $_=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Wf(e,n)),me(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Lf(e,t,s,a,o,n)}ae(n.byeaster)&&(this.eastermask=Yf(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[tt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=B(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=B(null,this.yearlen+7),s=k.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=B(null,this.yearlen),s=k.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),k.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new Qr(e,t,a,i)});return k.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new Qr(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case Y.YEARLY:return this.ydayset.bind(this);case Y.MONTHLY:return this.mdayset.bind(this);case Y.WEEKLY:return this.wdayset.bind(this);case Y.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case Y.HOURLY:return this.htimeset.bind(this);case Y.MINUTELY:return this.mtimeset.bind(this);case Y.SECONDLY:return this.stimeset.bind(this)}},r}(),$f=$_;function jf(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=qe(c,e.length)):(u=Math.floor((c-1)/e.length),l=qe(c-1,e.length));for(var d=[],f=t;f<n;f++){var p=s[f];!ae(p)||d.push(p)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=k.fromOrdinal(i.yearordinal+y),A=k.combine(g,m);G(a,A)||a.push(A)}return k.sort(a),a}function ds(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Wt(r);var u=wf.fromDate(t),l=new $f(e);l.rebuild(u.year,u.month);for(var c=G_(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],p=d[1],y=d[2],m=B_(f,p,y,l,e);if(me(a))for(var g=jf(a,c,p,y,l,f),A=0;A<g.length;A++){var x=g[A];if(s&&x>s)return Wt(r);if(x>=t){var C=Bf(x,e);if(!r.accept(C)||o&&(--o,!o))return Wt(r)}}else for(var A=p;A<y;A++){var z=f[A];if(!!ae(z))for(var re=k.fromOrdinal(l.yearordinal+z),de=0;de<c.length;de++){var J=c[de],x=k.combine(re,J);if(s&&x>s)return Wt(r);if(x>=t){var C=Bf(x,e);if(!r.accept(C)||o&&(--o,!o))return Wt(r)}}}if(e.interval===0||(u.add(e,m),u.year>k.MAXYEAR))return Wt(r);kn(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function j_(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return me(n)&&!G(n,r.mmask[e])||me(i)&&!r.wnomask[e]||me(s)&&!G(s,r.wdaymask[e])||me(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!G(r.eastermask,e)||(me(o)||me(u))&&!G(o,r.mdaymask[e])&&!G(u,r.nmdaymask[e])||me(l)&&(e<r.yearlen&&!G(l,e+1)&&!G(l,-r.yearlen+e)||e>=r.yearlen&&!G(l,e+1-r.yearlen)&&!G(l,-r.nextyearlen+e-r.yearlen))}function Bf(r,e){return new Ar(r,e.tzid).rezonedDate()}function Wt(r){return r.getValue()}function B_(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=j_(n,o,i),s&&(r[o]=null)}return s}function G_(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return kn(n)?Mf(t):n>=w.HOURLY&&me(i)&&!G(i,e.hour)||n>=w.MINUTELY&&me(s)&&!G(s,e.minute)||n>=w.SECONDLY&&me(a)&&!G(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var rt={MO:new ge(0),TU:new ge(1),WE:new ge(2),TH:new ge(3),FR:new ge(4),SA:new ge(5),SU:new ge(6)},Nn={freq:Y.YEARLY,dtstart:null,interval:1,wkst:rt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Pf=Object.keys(Nn),w=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new kf,this.origOptions=Va(e);var n=Df(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return An(e,t)},r.fromText=function(e,t){return vf(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ds(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Ka("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Ft("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!k.isValidDate(e)||!k.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Ka("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Ft("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!k.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Ft("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!k.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Ft("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Sn(this.origOptions)},r.prototype.toText=function(e,t,n){return Ef(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Rf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=Y.YEARLY,r.MONTHLY=Y.MONTHLY,r.WEEKLY=Y.WEEKLY,r.DAILY=Y.DAILY,r.HOURLY=Y.HOURLY,r.MINUTELY=Y.MINUTELY,r.SECONDLY=Y.SECONDLY,r.MO=rt.MO,r.TU=rt.TU,r.WE=rt.WE,r.TH=rt.TH,r.FR=rt.FR,r.SA=rt.SA,r.SU=rt.SU,r.parseString=xn,r.optionsToString=Sn,r}();function Gf(r,e,t,n,i,s){var a={},o=r.accept;function u(f,p){t.forEach(function(y){y.between(f,p,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var p=new Ar(f,s).rezonedDate();a[Number(p)]=!0}),r.accept=function(f){var p=Number(f);return isNaN(p)?o.call(this,f):!a[p]&&(u(new Date(p-1),new Date(p+1)),!a[p])?(a[p]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var p=Number(f);return a[p]?!0:(a[p]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Ar(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){ds(r,f.options)});var d=r._result;switch(k.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var Hf={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function H_(r,e){var t=[],n=[],i=[],s=[],a=Cn(r),o=a.dtstart,u=a.tzid,l=X_(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=Z_(c),p=f.name,y=f.parms,m=f.value;switch(p.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(xn(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],A=g[1];A&&!u&&(u=A),n=n.concat(zf(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(xn(m));break;case"EXDATE":s=s.concat(zf(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function z_(r,e){var t=H_(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new Qa(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new w(Xa(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new w(Xa(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new w(Xa(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function fs(r,e){return e===void 0&&(e={}),z_(r,K_(e))}function Xa(r,e,t){return je(je({},r),{dtstart:e,tzid:t})}function K_(r){var e=[],t=Object.keys(r),n=Object.keys(Hf);if(t.forEach(function(i){G(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return je(je({},Hf),r)}function V_(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Vd(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function Z_(r){var e=V_(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function X_(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function Q_(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function zf(r,e){return Q_(e),r.split(",").map(function(t){return k.untilStringToDate(t)})}function Kf(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var Qa=function(r){Zr(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=Kf.apply(n,["dtstart"]),n.tzid=Kf.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Gf(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){Vf(t,this._rrule)},e.prototype.exrule=function(t){Vf(t,this._exrule)},e.prototype.rdate=function(t){Zf(t,this._rdate)},e.prototype.exdate=function(t){Zf(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return fs(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return fs(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Sn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(Xf("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Xf("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(w);function Vf(r,e){if(!(r instanceof w))throw new TypeError(String(r)+" is not RRule instance");G(e.map(String),String(r))||e.push(r)}function Zf(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");G(e.map(Number),Number(r))||(e.push(r),k.sort(e))}function Xf(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return k.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var H=class{static by(e,t){let n=[H.compareByUrgency,H.compareByStatus,H.compareByDueDate,H.compareByPriority,H.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=H.comparators[s];i.push(a?H.makeReversedComparator(u):u),s==="tag"&&(H.tagPropertyInstance=o)}return t.sort(H.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return H.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return H.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return H.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return H.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=H.tagPropertyInstance-1;return e.tags.length<H.tagPropertyInstance&&t.tags.length>=H.tagPropertyInstance?1:t.tags.length<H.tagPropertyInstance&&e.tags.length>=H.tagPropertyInstance?-1:e.tags.length<H.tagPropertyInstance&&t.tags.length<H.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return H.cleanDescription(e.description).localeCompare(H.cleanDescription(t.description))}static cleanDescription(e){let t=ne().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},Ge=H;Ge.tagPropertyInstance=1,Ge.comparators={urgency:H.compareByUrgency,description:H.compareByDescription,priority:H.compareByPriority,start:H.compareByStartDate,scheduled:H.compareByScheduledDate,due:H.compareByDueDate,done:H.compareByDoneDate,path:H.compareByPath,status:H.compareByStatus,tag:H.compareByTag};var pt=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=w.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new w(u);return new pt({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment();e=new w(Ut($e({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()})).after(n.endOf("day").utc(!0).toDate())}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day").utc(!0);e=this.rrule.after(n.toDate())}if(e!==null){let i=window.moment.utc(e).local(!0).startOf("day"),s=null,a=null,o=null;if(this.referenceDate){if(this.startDate){let u=window.moment.duration(this.startDate.diff(this.referenceDate));s=window.moment(i),s.add(Math.round(u.asDays()),"days")}if(this.scheduledDate){let u=window.moment.duration(this.scheduledDate.diff(this.referenceDate));a=window.moment(i),a.add(Math.round(u.asDays()),"days")}if(this.dueDate){let u=window.moment.duration(this.dueDate.diff(this.referenceDate));o=window.moment(i),o.add(Math.round(u.asDays()),"days")}}return{startDate:s,scheduledDate:a,dueDate:o}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ge.compareByDate(this.startDate,e.startDate)!==0||Ge.compareByDate(this.scheduledDate,e.scheduledDate)!==0||Ge.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}};var Yt=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/Yt.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*Yt.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*Yt.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*Yt.startedCoefficient),e.priority){case"1":t+=1*Yt.priorityCoefficient;break;case"2":t+=.65*Yt.priorityCoefficient;break;case"3":t+=.325*Yt.priorityCoefficient;break}return t}},Lt=Yt;Lt.dueCoefficient=12,Lt.scheduledCoefficient=5,Lt.startedCoefficient=-3,Lt.priorityCoefficient=6,Lt.milliSecondsPerDay=1e3*60*60*24;var Re={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Rt="\u{1F501}",wt="\u{1F6EB}",Dt="\u23F3",Mt="\u{1F4C5}",Ja="\u2705",I=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:p,recurrence:y,blockLink:m,tags:g}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=p,this.recurrence=y,this.blockLink=m}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s}){let a=e.match(I.taskRegex);if(a===null)return null;let o=a[3].trim(),{globalFilter:u}=ne();if(!o.includes(u))return null;let l=o,c=a[1],d=a[2].toLowerCase(),f;switch(d){case" ":f="Todo";break;default:f="Done"}let p=l.match(this.blockLinkRegex),y=p!==null?p[0]:"";y!==""&&(l=l.replace(this.blockLinkRegex,"").trim());let m,g="3",A=null,x=null,C=null,z=null,re="",de=null,J=[],D="",ye=20,le=0;do{m=!1;let v=l.match(I.priorityRegex);if(v!==null){switch(v[1]){case Re.Low:g="4";break;case Re.Medium:g="2";break;case Re.High:g="1";break}l=l.replace(I.priorityRegex,"").trim(),m=!0}let _=l.match(I.doneDateRegex);_!==null&&(z=window.moment(_[1],I.dateFormat),l=l.replace(I.doneDateRegex,"").trim(),m=!0);let P=l.match(I.dueDateRegex);P!==null&&(C=window.moment(P[1],I.dateFormat),l=l.replace(I.dueDateRegex,"").trim(),m=!0);let E=l.match(I.scheduledDateRegex);E!==null&&(x=window.moment(E[1],I.dateFormat),l=l.replace(I.scheduledDateRegex,"").trim(),m=!0);let S=l.match(I.startDateRegex);S!==null&&(A=window.moment(S[1],I.dateFormat),l=l.replace(I.startDateRegex,"").trim(),m=!0);let O=l.match(I.recurrenceRegex);O!==null&&(re=O[1].trim(),l=l.replace(I.recurrenceRegex,"").trim(),m=!0);let W=l.match(I.hashTagsFromEnd);if(W!=null){l=l.replace(I.hashTagsFromEnd,"").trim(),m=!0;let ee=W[0].trim();D=D.length>0?[ee,D].join(" "):ee}le++}while(m&&le<=ye);re.length>0&&(de=pt.fromText({recurrenceRuleText:re,startDate:A,scheduledDate:x,dueDate:C})),D.length>0&&(l+=" "+D);let M=l.match(this.hashTags);return M!==null&&(J=M.filter(v=>v!==u).map(v=>v.trim())),new I({status:f,description:l,path:t,indentation:c,sectionStart:n,sectionIndex:i,originalStatusCharacter:d,precedingHeader:s,priority:g,startDate:A,scheduledDate:x,dueDate:C,doneDate:z,recurrence:de,blockLink:y,tags:J})}toLi(s){return se(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=ne();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield Qf.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,p=f.querySelector("p");if(p!==null){for(;p.firstChild;)f.insertBefore(p.firstChild,p);p.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let y=a.createEl("input");return y.addClass("task-list-item-checkbox"),y.type="checkbox",this.status!=="Todo"&&(y.checked=!0,a.addClass("is-checked")),y.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),y.disabled=!0;let g=this.toggle();ss({originalTask:this,newTasks:g})}),a.prepend(y),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),y.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new Kr;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+Re.High:this.priority==="2"?s=" "+Re.Medium:this.priority==="4"&&(s=" "+Re.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+Rt:` ${Rt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+wt:` ${wt} ${this.startDate.format(I.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&(t+=e.shortMode?" "+Dt:` ${Dt} ${this.scheduledDate.format(I.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+Mt:` ${Mt} ${this.dueDate.format(I.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+Ja:` ${Ja} ${this.doneDate.format(I.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=ne();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new I(Ut($e({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new I(Ut($e($e({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=Lt.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ge.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${Rt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(I.toTooltipDate({signifier:wt,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(I.toTooltipDate({signifier:Dt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(I.toTooltipDate({signifier:Mt,date:this.dueDate})),this.doneDate&&n.createDiv().setText(I.toTooltipDate({signifier:Ja,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(I.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=ne(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}},N=I;N.dateFormat="YYYY-MM-DD",N.indentationRegex=/^([\s\t>]*)/,N.listMarkerRegex=/[-*]/,N.checkboxRegex=/\[(.)\]/u,N.afterCheckboxRegex=/ *(.*)/u,N.taskRegex=new RegExp(I.indentationRegex.source+I.listMarkerRegex.source+" +"+I.checkboxRegex.source+I.afterCheckboxRegex.source,"u"),N.nonTaskRegex=new RegExp(I.indentationRegex.source+I.listMarkerRegex.source+"? *("+I.checkboxRegex.source+")?"+I.afterCheckboxRegex.source,"u"),N.listItemRegex=new RegExp(I.indentationRegex.source+"("+I.listMarkerRegex.source+")"),N.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,N.priorityRegex=/([⏫🔼🔽])$/u,N.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,N.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,N.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,N.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,N.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,N.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,N.hashTagsFromEnd=new RegExp(I.hashTags.source+"$");var fr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new is,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>se(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let e=this.vault.on("create",i=>{i instanceof ps.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(i)})});this.vaultEventReferences.push(e);let t=this.vault.on("delete",i=>{i instanceof ps.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(s=>s.path!==i.path),this.notifySubscribers()})});this.vaultEventReferences.push(t);let n=this.vault.on("rename",(i,s)=>{i instanceof ps.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.map(a=>a.path===s?new N(Ut($e({},a),{path:i.path})):a),this.notifySubscribers()})});this.vaultEventReferences.push(n)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>se(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return se(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=fr.getTasksFromFileContent(a,i,t,e)}N.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=null,u=0;for(let l of t)if(l.task!==void 0){if((o===null||o.position.end.line<l.position.start.line)&&(o=fr.getSection(l.position.start.line,n.sections),u=0),o===null)continue;let c=a[l.position.start.line],d=N.fromLine({line:c,path:i.path,sectionStart:o.position.start.line,sectionIndex:u,precedingHeader:fr.getPrecedingHeader(l.position.start.line,n.headings)});d!==null&&(u++,s.push(d))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Jc=require("obsidian");var jg=require("obsidian");function Jr(){}function ro(r){return r()}function ep(){return Object.create(null)}function Nr(r){r.forEach(ro)}function rp(r){return typeof r=="function"}function np(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function ip(r){return Object.keys(r).length===0}var sp=!1;function J_(){sp=!0}function eT(){sp=!1}function b(r,e){r.appendChild(e)}function no(r,e,t){r.insertBefore(e,t||null)}function _s(r){r.parentNode.removeChild(r)}function U(r){return document.createElement(r)}function tT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function $t(r){return document.createTextNode(r)}function Z(){return $t(" ")}function pr(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function ap(r){return function(e){return e.preventDefault(),r.call(this,e)}}function $(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function rT(r){return Array.from(r.childNodes)}function op(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function ht(r,e){r.value=e==null?"":e}function io(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function up(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}var kr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=tT(t.nodeName):this.e=U(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)no(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(_s)}};var qn;function Un(r){qn=r}function nT(){if(!qn)throw new Error("Function called outside component initialization");return qn}function so(r){nT().$$.on_mount.push(r)}var In=[];var ys=[],ms=[],tp=[],iT=Promise.resolve(),to=!1;function sT(){to||(to=!0,iT.then(lp))}function Fn(r){ms.push(r)}var eo=new Set,hs=0;function lp(){let r=qn;do{for(;hs<In.length;){let e=In[hs];hs++,Un(e),aT(e.$$)}for(Un(null),In.length=0,hs=0;ys.length;)ys.pop()();for(let e=0;e<ms.length;e+=1){let t=ms[e];eo.has(t)||(eo.add(t),t())}ms.length=0}while(In.length);for(;tp.length;)tp.pop()();to=!1,eo.clear(),Un(r)}function aT(r){if(r.fragment!==null){r.update(),Nr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Fn)}}var oT=new Set;function uT(r,e){r&&r.i&&(oT.delete(r),r.i(e))}var pC=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function lT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||Fn(()=>{let u=s.map(ro).filter(rp);a?a.push(...u):Nr(u),r.$$.on_mount=[]}),o.forEach(Fn)}function cp(r,e){let t=r.$$;t.fragment!==null&&(Nr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function cT(r,e){r.$$.dirty[0]===-1&&(In.push(r),sT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function dp(r,e,t,n,i,s,a,o=[-1]){let u=qn;Un(r);let l=r.$$={fragment:null,ctx:null,props:s,update:Jr,not_equal:i,bound:ep(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:ep(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...p)=>{let y=p.length?p[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&cT(r,d)),f}):[],l.update(),c=!0,Nr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){J_();let d=rT(e.target);l.fragment&&l.fragment.l(d),d.forEach(_s)}else l.fragment&&l.fragment.c();e.intro&&uT(r.$$.fragment),lT(r,e.target,e.anchor,e.customElement),eT(),lp()}Un(u)}var dT;typeof HTMLElement=="function"&&(dT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(ro).filter(rp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Nr(this.$$.on_disconnect)}$destroy(){cp(this,1),this.$destroy=Jr}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!ip(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var gs=class{$destroy(){cp(this,1),this.$destroy=Jr}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ip(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Wi=ns(Ee());var AO={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function gn(r){for(let[e,t]of Object.entries(AO))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function kO(r){let e,t,n,i,s,a,o,u,l,c,d,f,p,y,m,g,A,x,C,z,re,de,J,D,ye,le,M,v,_,P,E,S,O,W,ee,oe,ie,dt,Le,sr,ar,ft,Ne,Ce,or,Dr,St,bd,Mn,vd,Ed,Vi,Rd,ur,Zi,wd,It,Dd,Pn,Md,Pd,Xi,Od,Ad,kd,Hr,zr,Nd,Mr,Qi,Cd,Fa,Ji=r[0].status+"",Wa,xd,es,Sd,ts,Id,Ud,qd,La,Fd,rs,Ya,Wd;return{c(){e=U("div"),t=U("form"),n=U("div"),i=U("label"),i.textContent="Description",s=Z(),a=U("input"),o=Z(),u=U("hr"),l=Z(),c=U("div"),d=U("label"),d.textContent="Priority",f=Z(),p=U("select"),y=U("option"),y.textContent="None",m=U("option"),m.textContent=`${Re.High} High`,g=U("option"),g.textContent=`${Re.Medium} Medium`,A=U("option"),A.textContent=`${Re.Low} Low`,x=Z(),C=U("hr"),z=Z(),re=U("div"),de=U("label"),de.textContent="Recurrence",J=Z(),D=U("input"),ye=Z(),le=U("code"),M=$t(Rt),v=Z(),_=new kr(!1),P=Z(),E=U("hr"),S=Z(),O=U("div"),W=U("div"),ee=U("label"),ee.textContent="Due",oe=Z(),ie=U("input"),dt=Z(),Le=U("code"),sr=$t(Mt),ar=Z(),ft=new kr(!1),Ne=Z(),Ce=U("div"),or=U("label"),or.textContent="Scheduled",Dr=Z(),St=U("input"),bd=Z(),Mn=U("code"),vd=$t(Dt),Ed=Z(),Vi=new kr(!1),Rd=Z(),ur=U("div"),Zi=U("label"),Zi.textContent="Start",wd=Z(),It=U("input"),Dd=Z(),Pn=U("code"),Md=$t(wt),Pd=Z(),Xi=new kr(!1),Od=Z(),Ad=U("hr"),kd=Z(),Hr=U("div"),zr=U("div"),Nd=$t(`Status:
                `),Mr=U("input"),Cd=Z(),Fa=U("code"),Wa=$t(Ji),xd=Z(),es=U("div"),Sd=$t(`Done on:
                `),ts=U("code"),Id=Z(),Ud=U("hr"),qd=Z(),La=U("div"),Fd=Z(),rs=U("div"),rs.innerHTML='<button type="submit" class="mod-cta">Apply</button>',$(i,"for","description"),$(a,"id","description"),$(a,"type","text"),$(a,"class","tasks-modal-description"),$(a,"placeholder","Take out the trash"),$(n,"class","tasks-modal-section"),$(d,"for","priority"),y.__value="none",y.value=y.__value,m.__value="high",m.value=m.__value,g.__value="medium",g.value=g.__value,A.__value="low",A.value=A.__value,$(p,"id","priority"),$(p,"class","dropdown"),r[0].priority===void 0&&Fn(()=>r[14].call(p)),$(c,"class","tasks-modal-section"),$(de,"for","recurrence"),$(D,"id","description"),$(D,"type","text"),$(D,"placeholder","Try 'every 2 weeks on Thursday'."),_.a=null,$(re,"class","tasks-modal-section"),$(ee,"for","due"),$(ie,"id","due"),$(ie,"type","text"),$(ie,"placeholder",Zc),ft.a=null,$(W,"class","tasks-modal-date"),$(or,"for","scheduled"),$(St,"id","scheduled"),$(St,"type","text"),$(St,"placeholder",Zc),Vi.a=null,$(Ce,"class","tasks-modal-date"),$(Zi,"for","start"),$(It,"id","start"),$(It,"type","text"),$(It,"placeholder",Zc),Xi.a=null,$(ur,"class","tasks-modal-date"),$(O,"class","tasks-modal-section"),$(Mr,"type","checkbox"),$(Mr,"class","task-list-item-checkbox tasks-modal-checkbox"),Mr.checked=Qi=r[0].status==="Done",Mr.disabled=!0,$(Hr,"class","tasks-modal-section"),$(La,"class","tasks-modal-section"),$(rs,"class","tasks-modal-section"),$(e,"class","tasks-modal")},m(fe,Ye){no(fe,e,Ye),b(e,t),b(t,n),b(n,i),b(n,s),b(n,a),ht(a,r[0].description),r[13](a),b(t,o),b(t,u),b(t,l),b(t,c),b(c,d),b(c,f),b(c,p),b(p,y),b(p,m),b(p,g),b(p,A),io(p,r[0].priority),b(t,x),b(t,C),b(t,z),b(t,re),b(re,de),b(re,J),b(re,D),ht(D,r[0].recurrenceRule),b(re,ye),b(re,le),b(le,M),b(le,v),_.m(r[5],le),b(t,P),b(t,E),b(t,S),b(t,O),b(O,W),b(W,ee),b(W,oe),b(W,ie),ht(ie,r[0].dueDate),b(W,dt),b(W,Le),b(Le,sr),b(Le,ar),ft.m(r[4],Le),b(O,Ne),b(O,Ce),b(Ce,or),b(Ce,Dr),b(Ce,St),ht(St,r[0].scheduledDate),b(Ce,bd),b(Ce,Mn),b(Mn,vd),b(Mn,Ed),Vi.m(r[3],Mn),b(O,Rd),b(O,ur),b(ur,Zi),b(ur,wd),b(ur,It),ht(It,r[0].startDate),b(ur,Dd),b(ur,Pn),b(Pn,Md),b(Pn,Pd),Xi.m(r[2],Pn),b(t,Od),b(t,Ad),b(t,kd),b(t,Hr),b(Hr,zr),b(zr,Nd),b(zr,Mr),b(zr,Cd),b(zr,Fa),b(Fa,Wa),b(Hr,xd),b(Hr,es),b(es,Sd),b(es,ts),ts.innerHTML=r[6],b(t,Id),b(t,Ud),b(t,qd),b(t,La),b(t,Fd),b(t,rs),Ya||(Wd=[pr(a,"input",r[12]),pr(p,"change",r[14]),pr(D,"input",r[15]),pr(ie,"input",r[16]),pr(St,"input",r[17]),pr(It,"input",r[18]),pr(t,"submit",ap(r[7]))],Ya=!0)},p(fe,[Ye]){Ye&1&&a.value!==fe[0].description&&ht(a,fe[0].description),Ye&1&&io(p,fe[0].priority),Ye&1&&D.value!==fe[0].recurrenceRule&&ht(D,fe[0].recurrenceRule),Ye&32&&_.p(fe[5]),Ye&1&&ie.value!==fe[0].dueDate&&ht(ie,fe[0].dueDate),Ye&16&&ft.p(fe[4]),Ye&1&&St.value!==fe[0].scheduledDate&&ht(St,fe[0].scheduledDate),Ye&8&&Vi.p(fe[3]),Ye&1&&It.value!==fe[0].startDate&&ht(It,fe[0].startDate),Ye&4&&Xi.p(fe[2]),Ye&1&&Qi!==(Qi=fe[0].status==="Done")&&(Mr.checked=Qi),Ye&1&&Ji!==(Ji=fe[0].status+"")&&op(Wa,Ji),Ye&64&&(ts.innerHTML=fe[6])},i:Jr,o:Jr,d(fe){fe&&_s(e),r[13](null),Ya=!1,Nr(Wd)}}}var Zc="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function NO(r,e,t){var n,i;let{task:s}=e,{onSubmit:a}=e,o,u={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:""},l="",c="",d="",f="",p="",y=!1;function m(D,ye,le=void 0){if(!ye)return`<i>no ${D} date</i>`;let M=Wi.parseDate(ye,le,{forwardDate:le!=null});return M!==null?window.moment(M).format("YYYY-MM-DD"):`<i>invalid ${D} date</i>`}so(()=>{let{globalFilter:D}=ne(),ye=s.getDescriptionWithoutGlobalFilter();(ye!=s.description||ye.indexOf(D)==-1)&&(y=!0);let le="none";s.priority==="4"?le="low":s.priority==="2"?le="medium":s.priority==="1"&&(le="high"),t(0,u={description:ye,status:s.status,priority:le,recurrenceRule:s.recurrence?s.recurrence.toText():"",startDate:s.startDate?s.startDate.format("YYYY-MM-DD"):"",scheduledDate:s.scheduledDate?s.scheduledDate.format("YYYY-MM-DD"):"",dueDate:s.dueDate?s.dueDate.format("YYYY-MM-DD"):"",doneDate:s.doneDate?s.doneDate.format("YYYY-MM-DD"):""}),setTimeout(()=>{o.focus()},10)});let g=()=>{let{globalFilter:D}=ne(),ye=u.description.trim();y&&(ye=D+" "+ye);let le=null,M=Wi.parseDate(u.startDate,new Date,{forwardDate:!0});M!==null&&(le=window.moment(M));let v=null,_=Wi.parseDate(u.scheduledDate,new Date,{forwardDate:!0});_!==null&&(v=window.moment(_));let P=null,E=Wi.parseDate(u.dueDate,new Date,{forwardDate:!0});E!==null&&(P=window.moment(E));let S=null;u.recurrenceRule&&(S=pt.fromText({recurrenceRuleText:u.recurrenceRule,startDate:le,scheduledDate:v,dueDate:P}));let O;switch(u.priority){case"low":O="4";break;case"medium":O="2";break;case"high":O="1";break;default:O="3"}let W=new N(Object.assign(Object.assign({},s),{description:ye,status:u.status,priority:O,recurrence:S,startDate:le,scheduledDate:v,dueDate:P,doneDate:window.moment(u.doneDate,"YYYY-MM-DD").isValid()?window.moment(u.doneDate,"YYYY-MM-DD"):null}));a([W])};function A(){u.description=this.value,t(0,u)}function x(D){ys[D?"unshift":"push"](()=>{o=D,t(1,o)})}function C(){u.priority=up(this),t(0,u)}function z(){u.recurrenceRule=this.value,t(0,u)}function re(){u.dueDate=this.value,t(0,u)}function de(){u.scheduledDate=this.value,t(0,u)}function J(){u.startDate=this.value,t(0,u)}return r.$$set=D=>{"task"in D&&t(8,s=D.task),"onSubmit"in D&&t(9,a=D.onSubmit)},r.$$.update=()=>{if(r.$$.dirty&1){e:t(0,u.startDate=gn(u.startDate),u),t(2,l=m("start",u.startDate,new Date))}if(r.$$.dirty&1){e:t(0,u.scheduledDate=gn(u.scheduledDate),u),t(3,c=m("scheduled",u.scheduledDate,new Date))}if(r.$$.dirty&1){e:t(0,u.dueDate=gn(u.dueDate),u),t(4,d=m("due",u.dueDate,new Date))}if(r.$$.dirty&3073){e:u.recurrenceRule?t(5,f=t(11,i=t(10,n=pt.fromText({recurrenceRuleText:u.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||n===void 0?void 0:n.toText())!==null&&i!==void 0?i:"<i>invalid recurrence rule</i>"):t(5,f="<i>not recurring</>")}if(r.$$.dirty&1){e:t(6,p=m("done",u.doneDate))}},[u,o,l,c,d,f,p,g,s,a,n,i,A,x,C,z,re,de,J]}var Xc=class extends gs{constructor(e){super(),dp(this,e,NO,kO,np,{task:8,onSubmit:9})}},$g=Xc;var _n=class extends jg.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new $g({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var Bg=(r,e,t,n)=>{var d;if(r)return t instanceof Jc.MarkdownView;if(!(t instanceof Jc.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=CO({line:o,path:i}),l=f=>{let p=f.map(y=>y.toFileLineString()).join(`
`);e.setLine(a,p)};new _n({app:n,task:u,onSubmit:l}).open()},CO=({line:r,path:e})=>{var c;let t=N.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(t!==null)return t;let n=r.match(N.nonTaskRegex);if(n===null)return console.error("Tasks: Cannot create task on line:",r),new N({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[]});let i=n[1],s=(c=n[3])!=null?c:" ",a=s===" "?"Todo":"Done",o=n[4],u=r.match(N.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(N.blockLinkRegex,"")),new N({status:a,description:o,path:e,indentation:i,originalStatusCharacter:s,blockLink:l,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[]})};var ed=require("obsidian");var Gg=(r,e,t)=>{var u;if(r)return t instanceof ed.MarkdownView;if(!(t instanceof ed.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=xO({line:a,path:n});e.setLine(s,o),/[^ [\]*-]/.test(o)&&e.setCursor({line:i.line,ch:i.ch+o.length-a.length})},xO=({line:r,path:e})=>{let t=r,n=N.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(n!==null)t=SO({task:n});else{let i=r.match(N.taskRegex);i!==null?t=IO({regexMatch:i}):N.listItemRegex.test(r)?t=r.replace(N.listItemRegex,"$1$2 [ ]"):t=r.replace(N.indentationRegex,"$1- ")}return t},SO=({task:r})=>r.toggle().map(n=>n.toFileLineString()).join(`
`),IO=({regexMatch:r})=>{let e=r[1],t=r[2].toLowerCase(),n=r[3];return`${e}- [${t===" "?"x":" "}] ${n}`};var ca=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>Bg(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:Gg})}};var da=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var fa=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return se(this,null,function*(){var c;let{globalFilter:n}=ne(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let p=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){p=f[m];break}return p===null?!1:p.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let p=N.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null});p!==null&&(l.push(p),u++)}for(let d=0;d<i.length;d++){let f=l[d],p=i[d];if(f===void 0||p===void 0)continue;let y=(c=p.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),A=p.childNodes;for(let z=0;z<A.length;z=z+1){let re=A[z];re.nodeName.toLowerCase()==="div"?g.prepend(re):re.nodeName.toLowerCase()==="ul"&&g.append(re)}let x=p.querySelectorAll("[data-footnote-id]"),C=g.querySelectorAll("[data-footnote-id]");if(x.length===C.length)for(let z=0;z<x.length;z++)C[z].replaceWith(x[z]);p.replaceWith(g)}})}};var Hg=require("@codemirror/view"),zg=require("obsidian");var Kg=()=>Hg.ViewPlugin.fromClass(td),td=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new zg.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=N.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var l_=require("obsidian");var pa=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var ha=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new pa(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var ma=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var ya=class extends Map{},ga=class extends ma{},_a=class{constructor(e,t){this.groups=new ya;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new ga(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=vr.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new ga([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new ya([...this.groups.entries()].sort())}};var Ta=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var ba=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new _a(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new ha(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Ta(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var Vg=ns(Ee()),Qt=class{static parseDate(e,t=!1){return window.moment(Vg.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var ce=class{canCreateFilterForLine(e){return ce.lineMatchesFilter(this.filterRegexp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var ve=class{};var Er=class extends ce{canCreateFilterForLine(e){return e===Er.instructionForFieldPresence||e===Er.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new ve;if(e===Er.instructionForFieldPresence){let i=new ve;return i.filter=s=>this.dates(s).some(a=>a!==null),i}if(e===Er.instructionForFieldAbsence){let i=new ve;return i.filter=s=>!this.dates(s).some(a=>a!==null),i}let n=ce.getMatch(this.filterRegexp(),e);if(n!==null){let i=Qt.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filter=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filter=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filter=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new Er().dates(e).sort(Ge.compareByDate)[0]}filterRegexp(){return Er.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},Jt=Er;Jt.happensRegexp=/^happens (before|after|on)? ?(.*)/,Jt.instructionForFieldPresence="has happens date",Jt.instructionForFieldAbsence="no happens date";var ue=class{static by(e,t){return new ba(e,t)}static getGroupNamesForTask(e,t){let n=ue.groupers[e];return n(t)}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[ue.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[ue.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[ue.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[ue.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new Jt().earliestDate(e);return[ue.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(ue.groupDateFormat)}static groupByPath(e){return[e.path.replace(".md","")]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[i]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[t]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[t.substring(0,n+1)]}static groupByBacklink(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?["Unknown Location"]:[t]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},vr=ue;vr.groupDateFormat="YYYY-MM-DD dddd",vr.groupers={backlink:ue.groupByBacklink,done:ue.groupByDoneDate,due:ue.groupByDueDate,filename:ue.groupByFileName,folder:ue.groupByFolder,happens:ue.groupByHappensDate,heading:ue.groupByHeading,path:ue.groupByPath,priority:ue.groupByPriority,recurrence:ue.groupByRecurrence,recurring:ue.groupByRecurring,root:ue.groupByRoot,scheduled:ue.groupByScheduledDate,start:ue.groupByStartDate,status:ue.groupByStatus,tags:ue.groupByTags};var ct=class extends ce{createFilterOrErrorMessage(e){let t=new ve,n=ce.getMatch(this.filterRegexp(),e);if(n!==null){let i=n[1];if(["includes","does not include"].includes(i))t.filter=s=>ct.maybeNegate(ct.stringIncludesCaseInsensitive(this.value(s),n[2]),i);else if(["regex matches","regex does not match"].includes(i)){let s=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,a=n[2].match(s);a!==null?t.filter=o=>ct.maybeNegate(this.value(o).match(new RegExp(a[1],a[2]))!==null,i):t.error=`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`}else t.error=`do not understand query filter (${this.fieldName()})`}else t.error=`do not understand query filter (${this.fieldName()})`;return t}static stringIncludesCaseInsensitive(e,t){return e.toLocaleLowerCase().includes(t.toLocaleLowerCase())}filterRegexp(){return new RegExp(`^${this.fieldName()} (includes|does not include|regex matches|regex does not match) (.*)`)}static maybeNegate(e,t){return t.match(/not/)?!e:e}};var va=class extends ct{fieldName(){return"description"}value(e){let t=ne().globalFilter;return e.description.replace(t,"").trim()}};var Ct=class extends ce{constructor(){super(...arguments);this.instructionForFieldPresence=`has ${this.fieldName()} date`;this.instructionForFieldAbsence=`no ${this.fieldName()} date`}canCreateFilterForLine(t){return t===this.instructionForFieldPresence||t===this.instructionForFieldAbsence?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=new ve;if(t===this.instructionForFieldPresence)return n.filter=s=>this.date(s)!==null,n;if(t===this.instructionForFieldAbsence)return n.filter=s=>this.date(s)===null,n;let i=ce.getMatch(this.filterRegexp(),t);if(i!==null){let s=Qt.parseDate(i[2]);s.isValid()?i[1]==="before"?n.filter=a=>{let o=this.date(a);return o?o.isBefore(s):this.filterResultIfFieldMissing()}:i[1]==="after"?n.filter=a=>{let o=this.date(a);return o?o.isAfter(s):this.filterResultIfFieldMissing()}:n.filter=a=>{let o=this.date(a);return o?o.isSame(s):this.filterResultIfFieldMissing()}:n.error="do not understand "+this.fieldName()+" date"}else n.error="do not understand query filter ("+this.fieldName()+" date)";return n}};var rd=class extends Ct{filterRegexp(){return rd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Li=rd;Li.doneRegexp=/^done (before|after|on)? ?(.*)/;var nd=class extends Ct{filterRegexp(){return nd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},Yi=nd;Yi.dueRegexp=/^due (before|after|on)? ?(.*)/;var Ea=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new ve;return e===this._instruction?(t.filter=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var Ra=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Ea(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new ve;return t.error=`do not understand filter: ${e}`,t}};var Rr=class extends ce{constructor(){super(...arguments);this._filters=new Ra}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegexp(){return null}};var wa=class extends Rr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Da=class extends ct{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Ma=class extends ct{fieldName(){return"path"}value(e){return e.path}};var id=class extends ce{createFilterOrErrorMessage(e){let t=new ve,n=ce.getMatch(this.filterRegexp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filter=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegexp(){return id.priorityRegexp}},$i=id;$i.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var sd=class extends Ct{filterRegexp(){return sd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},ji=sd;ji.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var ad=class extends Ct{filterRegexp(){return ad.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Bi=ad;Bi.startRegexp=/^starts (before|after|on)? ?(.*)/;var Pa=class extends Rr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var Oa=class extends Rr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var od=class extends ce{createFilterOrErrorMessage(e){let t=new ve,n=ce.getMatch(this.filterRegexp(),e);if(n!==null){let i=n[2],s=n[3].replace(/^#/,"");i==="include"||i==="includes"?t.filter=a=>a.tags.find(o=>o.toLowerCase().includes(s.toLowerCase()))!==void 0:n[2]==="do not include"||n[2]==="does not include"?t.filter=a=>a.tags.find(o=>o.toLowerCase().includes(s.toLowerCase()))==null:t.error="do not understand query filter (tag/tags)"}else t.error="do not understand query filter (tag/tags)";return t}fieldName(){return"tag/tags"}filterRegexp(){return od.tagRegexp}},Gi=od;Gi.tagRegexp=/^(tag|tags) (includes|does not include|include|do not include) (.*)/;var u_=ns(o_());var Ca=class extends ce{constructor(){super(...arguments);this.basicBooleanRegexp=/.*(AND|OR|XOR|NOT)\s*[("].*/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegexp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new ve;if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,u_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=xa(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filter=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let u=this.subFields[o.value.trim()],l=u(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var BO=[()=>new Oa,()=>new Pa,()=>new $i,()=>new Jt,()=>new Bi,()=>new ji,()=>new Yi,()=>new Li,()=>new Ma,()=>new va,()=>new Gi,()=>new Da,()=>new wa,()=>new Ca];function xa(r){for(let e of BO){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var wn=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new Kr;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^hide (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n)});let t=Ge.by(this,e).slice(0,this.limit);return vr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null)switch(t[1].trim().toLowerCase()){case"task count":this._layoutOptions.hideTaskCount=!0;break;case"backlink":this._layoutOptions.hideBacklinks=!0;break;case"priority":this._layoutOptions.hidePriority=!0;break;case"start date":this._layoutOptions.hideStartDate=!0;break;case"scheduled date":this._layoutOptions.hideScheduledDate=!0;break;case"due date":this._layoutOptions.hideDueDate=!0;break;case"done date":this._layoutOptions.hideDoneDate=!0;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=!0;break;case"edit button":this._layoutOptions.hideEditButton=!0;break;default:this._error="do not understand hide option"}}parseFilter(e){let t=xa(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var Sa=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return se(this,null,function*(){n.addChild(new Dn({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Dn=class extends l_.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new wn({source:s}),this.queryType="tasks";break;default:this.query=new wn({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new wn({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return se(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){Dn.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return se(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(y=>y.remove());let f=c.createSpan(),p=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideBacklinks||this.addBacklinks(f,u,p,l),this.query.layoutOptions.hideEditButton||this.addEditButton(f,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{ss({originalTask:n,newTasks:u})};new _n({app:this.app,task:n,onSubmit:a}).open()})}static addGroupHeadings(t,n){for(let i of n)Dn.addGroupHeading(t,i)}static addGroupHeading(t,n){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),i.appendText(n.name)}addBacklinks(t,n,i,s){var u;t.addClass("tasks-backlink"),i||t.append(" (");let a=t.createEl("a");if(a.href=n.path,a.setAttribute("data-href",n.path),a.rel="noopener",a.target="_blank",a.addClass("internal-link"),i&&a.addClass("internal-link-short-mode"),n.precedingHeader!==null){let l=n.precedingHeader.replace(/#/g,"");a.href=a.href+"#"+l,a.setAttribute("data-href",a.getAttribute("data-href")+"#"+l)}let o;i?o=" \u{1F517}":o=(u=n.getLinkText({isFilenameUnique:s}))!=null?u:"",a.setText(o),i||t.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var ir=require("obsidian");var Ia=class extends ir.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),new ir.Setting(t).setName("Global task filter").setDesc("The global filter will be applied to all checklist items.").addText(n=>{let i=ne();n.setPlaceholder("#task").setValue(i.globalFilter).onChange(s=>se(this,null,function*(){qt({globalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("div",{cls:"setting-item-description",text:'The global filter will be applied to all checklist items to filter out "non-task" checklist items.\nA checklist item must include the specified string in its description in order to be considered a task.\nFor example, if you set the global filter to `#task`, the Tasks plugin will only handle checklist items tagged with `#task`.\nOther checklist items will remain normal checklist items and not appear in queries or get a done date set.\nLeave empty if you want all checklist items from your vault to be tasks managed by this plugin.'}),new ir.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=ne();n.setValue(i.removeGlobalFilter).onChange(s=>se(this,null,function*(){qt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),new ir.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=ne();n.setValue(i.setDoneDate).onChange(s=>se(this,null,function*(){qt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new ir.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=ne();n.setValue(i.autoSuggestInEditor).onChange(s=>se(this,null,function*(){qt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new ir.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=ne();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>se(this,null,function*(){qt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new ir.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=ne();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>se(this,null,function*(){qt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))})}};var d_=require("obsidian");var GO=`${wt}${Dt}${Mt}`;function c_(r,e,t){let n=[];n=n.concat(KO(r,e,t)),n=n.concat(VO(r,e,t));let i=zO(r,t),s=Td(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function HO(r){if(Object.values(Re).some(e=>e.length>0&&r.includes(e)))return!0}function zO(r,e){let t=[];return r.includes(Mt)||t.push({displayText:`${Mt} due date`,appendText:`${Mt} `}),r.includes(wt)||t.push({displayText:`${wt} start date`,appendText:`${wt} `}),r.includes(Dt)||t.push({displayText:`${Dt} scheduled date`,appendText:`${Dt} `}),HO(r)||(t.push({displayText:`${Re.High} high priority`,appendText:`${Re.High} `}),t.push({displayText:`${Re.Medium} medium priority`,appendText:`${Re.Medium} `}),t.push({displayText:`${Re.Low} low priority`,appendText:`${Re.Low} `})),r.includes(Rt)||t.push({displayText:`${Rt} recurring (repeat)`,appendText:`${Rt} `}),t}function KO(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${GO}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Td(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?Qt.parseDate(gn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(N.dateFormat)}`,appendText:`${o} ${l.format(N.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(p=>u&&u.length>=c&&p.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let p of f){let m=`${Qt.parseDate(p,!0).format(N.dateFormat)}`;i.push({suggestionType:"match",displayText:`${p} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function VO(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Rt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Td(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let p=(o=pt.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(p){let y=`${u} ${p} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${p}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(p=>l&&l.length>=c&&p.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let p of f)i.push({suggestionType:"match",displayText:`${p}`,appendText:`${u} ${p} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Td(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Ua=class extends d_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(N.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=c_(n,i.ch,this.settings),a=[];for(let o of s)a.push(Ut($e({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var qa=class extends f_.Plugin{onload(){return se(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Ia({plugin:this})),Hd({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new da({obsidianEvents:this.app.workspace});this.cache=new fr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new fa({plugin:this}),this.queryRenderer=new Sa({plugin:this,events:t}),this.registerEditorExtension(Kg()),this.registerEditorSuggest(new Ua(this.app,ne())),new ca({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return se(this,null,function*(){let t=yield this.loadData();qt(t)})}saveSettings(){return se(this,null,function*(){yield this.saveData(ne())})}};
